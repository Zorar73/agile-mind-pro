# üìö AGILE MIND PRO - –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞

## üìñ –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–û–±–∑–æ—Ä –ø—Ä–æ–µ–∫—Ç–∞](#–æ–±–∑–æ—Ä-–ø—Ä–æ–µ–∫—Ç–∞)
2. [–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫](#—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π-—Å—Ç–µ–∫)
3. [–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç](#–±—ã—Å—Ç—Ä—ã–π-—Å—Ç–∞—Ä—Ç)
4. [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è)
5. [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞](#—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–ø—Ä–æ–µ–∫—Ç–∞)
6. [Firebase –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è](#firebase-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è)
7. [–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö Firestore](#–±–∞–∑–∞-–¥–∞–Ω–Ω—ã—Ö-firestore)
8. [–°–µ—Ä–≤–∏—Å—ã (Services)](#—Å–µ—Ä–≤–∏—Å—ã-services)
9. [–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (Components)](#–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã-components)
10. [–°—Ç—Ä–∞–Ω–∏—Ü—ã (Pages)](#—Å—Ç—Ä–∞–Ω–∏—Ü—ã-pages)
11. [–ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è (Routing)](#–º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è-routing)
12. [–°–∏—Å—Ç–µ–º–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞](#—Å–∏—Å—Ç–µ–º–∞-–ø—Ä–∞–≤-–¥–æ—Å—Ç—É–ø–∞)
13. [–°—Ç–∏–ª–∏–∑–∞—Ü–∏—è –∏ —Ç–µ–º–∞](#—Å—Ç–∏–ª–∏–∑–∞—Ü–∏—è-–∏-—Ç–µ–º–∞)
14. [–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é](#–∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏-–ø–æ-—Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é)
15. [Troubleshooting](#troubleshooting)
16. [–†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏](#—Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ-—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏)

---

# 1. –û–±–∑–æ—Ä –ø—Ä–æ–µ–∫—Ç–∞

## –ß—Ç–æ —ç—Ç–æ?

**Agile Mind Pro** ‚Äî —ç—Ç–æ –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–¥–∞—á–∞–º–∏ –∏ –ø—Ä–æ–µ–∫—Ç–∞–º–∏ —Å –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–º AI-–∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä–æ–º. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ—Å—Ç—Ä–æ–µ–Ω–æ –ø–æ –ø—Ä–∏–Ω—Ü–∏–ø—É Kanban-–¥–æ—Å–æ–∫ (–∞–Ω–∞–ª–æ–≥ Trello/Jira) —Å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º–∏ —Ñ—É–Ω–∫—Ü–∏—è–º–∏ –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã –∫–æ–º–∞–Ω–¥.

## –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### üéØ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∞–º–∏
- **Kanban-–¥–æ—Å–∫–∏** —Å –∫–æ–ª–æ–Ω–∫–∞–º–∏ –∏ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ–º –∑–∞–¥–∞—á (drag & drop)
- **–ö–∞–ª–µ–Ω–¥–∞—Ä—å** —Å 5 –º–∞—Å—à—Ç–∞–±–∞–º–∏ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ (–≥–æ–¥, –∫–≤–∞—Ä—Ç–∞–ª, –º–µ—Å—è—Ü, –Ω–µ–¥–µ–ª—è, –¥–µ–Ω—å)
- **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è** –∑–∞–¥–∞—á –ø–æ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è–º, –¥–æ—Å–∫–∞–º, —Ç–µ–≥–∞–º, –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞–º
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã –∑–∞–¥–∞—á**: –æ–±—ã—á–Ω–∞—è, —Å—Ä–æ—á–Ω–∞—è, –ø–æ–≤—Ç–æ—Ä—è—é—â–∞—è—Å—è
- **–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏** —Å @mentions
- **–í–ª–æ–∂–µ–Ω–∏—è** (—Ñ–∞–π–ª—ã)
- **–ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π** (activity log)

### üë• –ö–æ–º–∞–Ω–¥–Ω–∞—è —Ä–∞–±–æ—Ç–∞
- **–ö–æ–º–∞–Ω–¥—ã** —Å –ª–∏–¥–µ—Ä–æ–º –∏ —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏
- **–ß–∞—Ç –∫–æ–º–∞–Ω–¥—ã** —Å @mentions
- **–ü—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è** –≤ –∫–æ–º–∞–Ω–¥—ã
- **–û–±—â–∏–µ –¥–æ—Å–∫–∏** –∫–æ–º–∞–Ω–¥—ã
- **–ü—Ä–æ–µ–∫—Ç—ã** (–≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –¥–æ—Å–æ–∫ –∏ –∑–∞–¥–∞—á)

### üìù –ù–∞–±—Ä–æ—Å–∫–∏
- **–õ–∏—á–Ω—ã–µ –Ω–∞–±—Ä–æ—Å–∫–∏** (–∑–∞–º–µ—Ç–∫–∏)
- **–®–∞—Ä–∏–Ω–≥** —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –∏ –∫–æ–º–∞–Ω–¥–∞–º–∏
- **–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏** –∫ –Ω–∞–±—Ä–æ—Å–∫–∞–º
- **–í–ª–æ–∂–µ–Ω–∏—è**

### ü§ñ AI-—Ñ—É–Ω–∫—Ü–∏–∏
- **–ê–Ω–∞–ª–∏–∑ –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤ –≤—Å—Ç—Ä–µ—á** (–∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –∑–∞–¥–∞—á)
- **–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á** –Ω–∞ –ø–æ–¥–∑–∞–¥–∞—á–∏
- –ú–æ–¥–µ–ª—å: **Google Gemini 2.5-pro**

### üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
- **–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è** —Å –º–æ–¥–µ—Ä–∞—Ü–∏–µ–π (pending ‚Üí user ‚Üí admin)
- **–ü—Ä–æ—Ñ–∏–ª–∏** —Å –∫–æ–Ω—Ç–∞–∫—Ç–∞–º–∏ (WhatsApp, Telegram, —Ç–µ–ª–µ—Ñ–æ–Ω)
- **–ê–≤–∞—Ç–∞—Ä—ã**: 25 —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö + –≥–µ–Ω–µ—Ä–∞—Ü–∏—è + –∑–∞–≥—Ä—É–∑–∫–∞ —Ñ–æ—Ç–æ
- **–†–æ–ª–∏**: pending, user, admin

### üîî –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –∑–∞–¥–∞—á**
- **–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏** –∏ **@mentions**
- **–î–µ–¥–ª–∞–π–Ω—ã**
- **–ü—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è –≤ –∫–æ–º–∞–Ω–¥—ã**
- **–û–¥–æ–±—Ä–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è**

---

# 2. –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

## Frontend

| –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è | –í–µ—Ä—Å–∏—è | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|------------|--------|------------|
| **React** | 19.2.0 | UI –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ |
| **Vite** | 7.2.5 (rolldown) | –°–±–æ—Ä—â–∏–∫ |
| **Material-UI** | 7.3.5 | UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã |
| **@emotion** | - | –°—Ç–∏–ª–∏–∑–∞—Ü–∏—è |
| **React Router DOM** | 7.9.6 | –†–æ—É—Ç–∏–Ω–≥ |
| **@dnd-kit** | 6.3.1 | Drag & Drop |
| **date-fns** | 4.1.0 | –†–∞–±–æ—Ç–∞ —Å –¥–∞—Ç–∞–º–∏ |
| **Recharts** | 3.5.0 | –ì—Ä–∞—Ñ–∏–∫–∏ |
| **react-markdown** | 10.1.0 | Markdown —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ |

## Backend

| –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|------------|------------|
| **Firebase Auth** | –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è |
| **Firestore** | –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö NoSQL |
| **Firebase Storage** | –•—Ä–∞–Ω–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ |

## AI

| –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è | API Key | –ú–æ–¥–µ–ª—å |
|------------|---------|--------|
| **Google Generative AI** | AIzaSyB8zF91xZeGD4vz92T6_0dEilbrmQieiJs | gemini-2.5-pro |

---

# 3. –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

## –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- **Node.js** 18+ (–ø—Ä–æ–≤–µ—Ä—å: `node --version`)
- **npm** 9+ (–ø—Ä–æ–≤–µ—Ä—å: `npm --version`)
- **–ê–∫–∫–∞—É–Ω—Ç Firebase** (—Å–æ–∑–¥–∞–π –Ω–∞ https://console.firebase.google.com)
- **Git** (–¥–ª—è –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è)

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞ 5 —à–∞–≥–æ–≤

### 1Ô∏è‚É£ –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```bash
git clone <repository-url>
cd agile-mind-pro/frontend
```

### 2Ô∏è‚É£ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
npm install
```

### 3Ô∏è‚É£ –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Firebase

–°–æ–∑–¥–∞–π —Ñ–∞–π–ª `frontend/src/config/firebase.js`:

```javascript
import { initializeApp } from 'firebase/app';
import { getAuth } from 'firebase/auth';
import { getFirestore } from 'firebase/firestore';
import { getStorage } from 'firebase/storage';

const firebaseConfig = {
  apiKey: "AIzaSyAngTFq2DEJla-q7823XvSfVL2CVOye7Jg",
  authDomain: "agile-mind-pro.firebaseapp.com",
  projectId: "agile-mind-pro",
  storageBucket: "agile-mind-pro.firebasestorage.app",
  messagingSenderId: "YOUR_SENDER_ID",
  appId: "YOUR_APP_ID"
};

const app = initializeApp(firebaseConfig);

export const auth = getAuth(app);
export const db = getFirestore(app);
export const storage = getStorage(app);
```

### 4Ô∏è‚É£ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Firestore Rules

–í Firebase Console ‚Üí Firestore Database ‚Üí Rules:

```javascript
rules_version = '2';

service cloud.firestore {
  match /databases/{database}/documents {
    
    function isSignedIn() {
      return request.auth != null;
    }
    
    function getUserData() {
      return get(/databases/$(database)/documents/users/$(request.auth.uid)).data;
    }
    
    function getUserRole() {
      return getUserData().role;
    }
    
    function isAdmin() {
      return isSignedIn() && getUserRole() == 'admin';
    }
    
    function isApproved() {
      return isSignedIn() && getUserRole() != 'pending';
    }

    match /users/{userId} {
      allow read: if isSignedIn();
      allow create: if true;
      allow update: if isSignedIn() && (request.auth.uid == userId || isAdmin());
      allow delete: if isAdmin();
    }

    match /userSettings/{userId} {
      allow read, write: if isSignedIn() && request.auth.uid == userId;
    }

    match /boards/{boardId} {
      allow read: if isSignedIn();
      allow create: if isApproved();
      allow update, delete: if isSignedIn();
      
      match /{document=**} {
        allow read, write: if isSignedIn();
      }
    }

    match /teams/{teamId} {
      allow read: if isSignedIn();
      allow create: if isApproved();
      allow update, delete: if isSignedIn();
      
      match /{document=**} {
        allow read, write: if isSignedIn();
      }
    }

    match /sketches/{sketchId} {
      allow read: if isSignedIn();
      allow create: if isApproved();
      allow update, delete: if isSignedIn();
      
      match /{document=**} {
        allow read, write: if isSignedIn();
      }
    }

    match /projects/{projectId} {
      allow read: if isSignedIn();
      allow create: if isApproved();
      allow update, delete: if isSignedIn();
      
      match /{document=**} {
        allow read, write: if isSignedIn();
      }
    }

    match /notifications/{notificationId} {
      allow read: if isSignedIn() && resource.data.userId == request.auth.uid;
      allow create: if isSignedIn();
      allow update, delete: if isSignedIn() && resource.data.userId == request.auth.uid;
    }
  }
}
```

### 5Ô∏è‚É£ –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

```bash
npm run dev
```

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –æ—Ç–∫—Ä–æ–µ—Ç—Å—è –Ω–∞ http://localhost:5173

---

# 4. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

## –î–∏–∞–≥—Ä–∞–º–º–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ         React Application (SPA)              ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ  ‚îÇ          App.jsx (Root)                ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  - UserContext                         ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  - Router                              ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  - ProtectedRoute                      ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  - ThemeProvider                       ‚îÇ  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îÇ                    ‚îÇ                         ‚îÇ
‚îÇ    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê         ‚îÇ
‚îÇ    ‚ñº                               ‚ñº         ‚îÇ
‚îÇ  Pages                        Components     ‚îÇ
‚îÇ  ‚îú‚îÄ Dashboard                 ‚îú‚îÄ MainLayout  ‚îÇ
‚îÇ  ‚îú‚îÄ Board                     ‚îú‚îÄ Sidebar     ‚îÇ
‚îÇ  ‚îú‚îÄ Calendar                  ‚îú‚îÄ TaskCard    ‚îÇ
‚îÇ  ‚îú‚îÄ MyTasks                   ‚îú‚îÄ TaskModal   ‚îÇ
‚îÇ  ‚îú‚îÄ Team                      ‚îú‚îÄ AIAnalyzer  ‚îÇ
‚îÇ  ‚îú‚îÄ Sketches                  ‚îî‚îÄ ...         ‚îÇ
‚îÇ  ‚îú‚îÄ Users                                    ‚îÇ
‚îÇ  ‚îú‚îÄ Settings                                 ‚îÇ
‚îÇ  ‚îî‚îÄ Profile                                  ‚îÇ
‚îÇ                                              ‚îÇ
‚îÇ            ‚ñº                                 ‚îÇ
‚îÇ         Services                             ‚îÇ
‚îÇ  ‚îú‚îÄ auth.service.js                          ‚îÇ
‚îÇ  ‚îú‚îÄ board.service.js                         ‚îÇ
‚îÇ  ‚îú‚îÄ task.service.js                          ‚îÇ
‚îÇ  ‚îú‚îÄ team.service.js                          ‚îÇ
‚îÇ  ‚îú‚îÄ sketch.service.js                        ‚îÇ
‚îÇ  ‚îú‚îÄ notification.service.js                  ‚îÇ
‚îÇ  ‚îú‚îÄ user.service.js                          ‚îÇ
‚îÇ  ‚îî‚îÄ ai.service.js                            ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                    ‚îÇ
                    ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ              Firebase Backend                ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ  ‚îÇ   Auth     ‚îÇ Firestore  ‚îÇ   Storage    ‚îÇ ‚îÇ
‚îÇ  ‚îÇ            ‚îÇ            ‚îÇ              ‚îÇ ‚îÇ
‚îÇ  ‚îÇ - Login    ‚îÇ - users    ‚îÇ - avatars    ‚îÇ ‚îÇ
‚îÇ  ‚îÇ - Register ‚îÇ - boards   ‚îÇ - task files ‚îÇ ‚îÇ
‚îÇ  ‚îÇ - Logout   ‚îÇ - tasks    ‚îÇ              ‚îÇ ‚îÇ
‚îÇ  ‚îÇ            ‚îÇ - teams    ‚îÇ              ‚îÇ ‚îÇ
‚îÇ  ‚îÇ            ‚îÇ - sketches ‚îÇ              ‚îÇ ‚îÇ
‚îÇ  ‚îÇ            ‚îÇ - projects ‚îÇ              ‚îÇ ‚îÇ
‚îÇ  ‚îÇ            ‚îÇ - notify   ‚îÇ              ‚îÇ ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                    ‚îÇ
                    ‚ñº
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚îÇ  Google Generative AI  ‚îÇ
        ‚îÇ  (Gemini 2.5-pro)      ‚îÇ
        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## –ü–∞—Ç—Ç–µ—Ä–Ω—ã –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### Service Layer Pattern
–í—Å—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –≤—ã–Ω–µ—Å–µ–Ω–∞ –≤ —Å–µ—Ä–≤–∏—Å—ã.

```javascript
// ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ - –ª–æ–≥–∏–∫–∞ –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ
function BoardPage() {
  const createTask = async () => {
    const taskRef = await addDoc(collection(db, 'tasks'), {...});
  };
}

// ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ - –ª–æ–≥–∏–∫–∞ –≤ —Å–µ—Ä–≤–∏—Å–µ
function BoardPage() {
  const createTask = async () => {
    await taskService.createTask(boardId, taskData, user.uid);
  };
}
```

### Context API –¥–ª—è –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ state

```javascript
// App.jsx
export const UserContext = createContext();

function App() {
  const [user, setUser] = useState(null);
  
  return (
    <UserContext.Provider value={{ user, setUser }}>
      {/* ... */}
    </UserContext.Provider>
  );
}

// –í –ª—é–±–æ–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ
const { user } = useContext(UserContext);
```

### Protected Routes

```javascript
function ProtectedRoute({ children }) {
  const { user, loading } = useContext(UserContext);

  if (loading) return <CircularProgress />;
  if (!user) return <Navigate to="/login" />;
  if (user.role === 'pending') return <Navigate to="/pending" />;

  return children;
}
```

### Real-time Subscriptions

```javascript
useEffect(() => {
  const unsubscribe = taskService.subscribeToTasks(boardId, (tasks) => {
    setTasks(tasks);
  });
  
  return () => unsubscribe();
}, [boardId]);
```

---

# 5. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
agile-mind-pro/
‚îú‚îÄ‚îÄ frontend/
‚îÇ   ‚îú‚îÄ‚îÄ public/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ avatars/                    # 25 SVG –∞–≤–∞—Ç–∞—Ä–æ–∫
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ avatar-1.svg           # üöÄ
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ avatar-2.svg           # ‚≠ê
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index.html
‚îÇ   ‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ components/                 # React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Layout/
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ MainLayout.jsx     # –ì–ª–∞–≤–Ω—ã–π layout
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Sidebar.jsx        # –ë–æ–∫–æ–≤–æ–µ –º–µ–Ω—é
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Kanban/
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ KanbanColumn.jsx   # –ö–æ–ª–æ–Ω–∫–∞ –¥–æ—Å–∫–∏
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ TaskCard.jsx       # –ö–∞—Ä—Ç–æ—á–∫–∞ –∑–∞–¥–∞—á–∏
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ TaskModal.jsx      # –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AI/
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ AIAnalyzer.jsx     # AI –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Team/
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ CreateTeamDialog.jsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ TeamCard.jsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ UserProfileModal.jsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Sketch/
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ SketchModal.jsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Profile/
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ AvatarSelector.jsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Notifications/
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ NotificationCenter.jsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ DebugConsole.jsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ pages/                      # –°—Ç—Ä–∞–Ω–∏—Ü—ã
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ LoginPage.jsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ RegisterPage.jsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ DashboardPage.jsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ BoardPage.jsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ CalendarPage.jsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ MyTasksPage.jsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ TeamPage.jsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ SketchesPage.jsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ UsersPage.jsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ SettingsPage.jsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ProfilePage.jsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ PendingApprovalPage.jsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ services/                   # –°–µ—Ä–≤–∏—Å—ã
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth.service.js
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ board.service.js
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ task.service.js
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ team.service.js
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ sketch.service.js
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ notification.service.js
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ user.service.js
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ai.service.js
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ firebase.js
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ utils/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ avatarGenerator.js
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ App.jsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ main.jsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ theme.js
‚îÇ   ‚îú‚îÄ‚îÄ package.json
‚îÇ   ‚îî‚îÄ‚îÄ vite.config.js
‚îî‚îÄ‚îÄ README.md
```

---

# 6. Firebase –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

## Project Info

```
Project ID: agile-mind-pro
API Key: AIzaSyAngTFq2DEJla-q7823XvSfVL2CVOye7Jg
Auth Domain: agile-mind-pro.firebaseapp.com
Storage Bucket: agile-mind-pro.firebasestorage.app
```

## firebase.js

```javascript
import { initializeApp } from 'firebase/app';
import { getAuth } from 'firebase/auth';
import { getFirestore } from 'firebase/firestore';
import { getStorage } from 'firebase/storage';

const firebaseConfig = {
  apiKey: "AIzaSyAngTFq2DEJla-q7823XvSfVL2CVOye7Jg",
  authDomain: "agile-mind-pro.firebaseapp.com",
  projectId: "agile-mind-pro",
  storageBucket: "agile-mind-pro.firebasestorage.app",
  messagingSenderId: "YOUR_SENDER_ID",
  appId: "YOUR_APP_ID"
};

const app = initializeApp(firebaseConfig);

export const auth = getAuth(app);
export const db = getFirestore(app);
export const storage = getStorage(app);
```

## Storage Rules

```
rules_version = '2';

service firebase.storage {
  match /b/{bucket}/o {
    match /boards/{boardId}/tasks/{taskId}/{allPaths=**} {
      allow read: if request.auth != null;
      allow write: if request.auth != null;
    }
    
    match /avatars/{allPaths=**} {
      allow read: if true;
      allow write: if request.auth != null;
    }
  }
}
```

---

# 7. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö Firestore

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–ª–ª–µ–∫—Ü–∏–π

### üìÅ users

```javascript
{
  id: "user_id",                    // Document ID
  email: "user@example.com",
  firstName: "–ò–≤–∞–Ω",
  middleName: "–ò–≤–∞–Ω–æ–≤–∏—á",
  lastName: "–ò–≤–∞–Ω–æ–≤",
  position: "Backend Developer",
  responsibility: "API —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞",
  role: "user",                     // 'pending' | 'user' | 'admin'
  avatar: "generated",              // 'generated' | 'default-1' | 'https://...'
  contacts: {
    whatsapp: "+79991234567",
    telegram: "@username",
    phone: "+79991234567"
  },
  teamLimit: 10,                    // –õ–∏–º–∏—Ç –∫–æ–º–∞–Ω–¥
  teamsCount: 3,                    // –¢–µ–∫—É—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ
  createdAt: Timestamp,
  approvedBy: "admin_user_id",      // –ö—Ç–æ –æ–¥–æ–±—Ä–∏–ª
  approvedAt: Timestamp
}
```

### üìÅ boards

```javascript
{
  id: "board_id",
  title: "–ü—Ä–æ–µ–∫—Ç X",
  ownerId: "user_id",
  members: {
    "user_id_1": "owner",           // 'owner' | 'editor' | 'viewer'
    "user_id_2": "editor",
    "user_id_3": "viewer"
  },
  columnOrder: [                    // –ü–æ—Ä—è–¥–æ–∫ –∫–æ–ª–æ–Ω–æ–∫
    "column_id_1",
    "column_id_2",
    "column_id_3"
  ],
  settings: {
    whoCanMoveToStatus: {
      "column_id_1": ["owner", "editor"],
      "column_id_2": ["owner"]
    }
  },
  createdAt: Timestamp
}
```

### üìÅ boards/{boardId}/columns

```javascript
{
  id: "column_id",
  title: "üìã –ó–∞–¥–∞—á–∞ –ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∞",
  color: "#1976d2",
  order: 0,
  createdAt: Timestamp
}
```

### üìÅ boards/{boardId}/tasks

```javascript
{
  id: "task_id",
  title: "–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é",
  description: "Markdown –æ–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏",
  columnId: "column_id",
  order: 0,
  assigneeId: "user_id",           // –ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å
  creatorId: "user_id",            // –°–æ–∑–¥–∞—Ç–µ–ª—å
  dueDate: "2024-12-31",           // –î–µ–¥–ª–∞–π–Ω (—Å—Ç—Ä–æ–∫–∞ YYYY-MM-DD)
  priority: "normal",              // 'normal' | 'urgent' | 'recurring'
  tags: ["backend", "security"],
  attachments: [
    {
      name: "design.pdf",
      url: "https://...",
      size: 1024,
      uploadedAt: Timestamp
    }
  ],
  createdAt: Timestamp,
  updatedAt: Timestamp
}
```

### üìÅ boards/{boardId}/tasks/{taskId}/comments

```javascript
{
  id: "comment_id",
  userId: "user_id",
  text: "–û—Ç–ª–∏—á–Ω–∞—è —Ä–∞–±–æ—Ç–∞! @username",
  mentions: ["user_id_1"],         // –£–ø–æ–º—è–Ω—É—Ç—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
  createdAt: Timestamp
}
```

### üìÅ boards/{boardId}/tasks/{taskId}/activity

```javascript
{
  id: "activity_id",
  type: "task_moved",              // 'task_created' | 'task_moved' | 'task_updated' | ...
  userId: "user_id",
  details: {
    from: "column_id_1",
    to: "column_id_2"
  },
  timestamp: Timestamp,
  changes: {
    field: "columnId",
    oldValue: "column_id_1",
    newValue: "column_id_2"
  }
}
```

### üìÅ teams

```javascript
{
  id: "team_id",
  name: "Backend Team",
  description: "–ö–æ–º–∞–Ω–¥–∞ backend —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏",
  image: "üöÄ",                     // –≠–º–æ–¥–∑–∏ –∏–ª–∏ URL
  leaderId: "user_id",             // –õ–∏–¥–µ—Ä –∫–æ–º–∞–Ω–¥—ã
  members: {
    "user_id_1": "leader",
    "user_id_2": "member",
    "user_id_3": "member"
  },
  createdAt: Timestamp,
  createdBy: "user_id"
}
```

### üìÅ teams/{teamId}/invitations

```javascript
{
  id: "invitation_id",
  teamId: "team_id",
  userId: "user_id",               // –ö–æ–≥–æ –ø—Ä–∏–≥–ª–∞—à–∞—é—Ç
  invitedBy: "user_id",            // –ö—Ç–æ –ø—Ä–∏–≥–ª–∞—Å–∏–ª
  status: "pending",               // 'pending' | 'accepted' | 'rejected'
  createdAt: Timestamp
}
```

### üìÅ teams/{teamId}/chat

```javascript
{
  id: "message_id",
  userId: "user_id",
  text: "–ü—Ä–∏–≤–µ—Ç –∫–æ–º–∞–Ω–¥–∞! @username",
  mentions: ["user_id_1"],
  attachments: [
    {
      name: "file.pdf",
      url: "https://...",
      size: 1024,
      uploadedAt: Timestamp
    }
  ],
  createdAt: Timestamp
}
```

### üìÅ sketches

```javascript
{
  id: "sketch_id",
  title: "–ò–¥–µ—è –¥–ª—è –Ω–æ–≤–æ–≥–æ —Ñ–∏—á–∏",
  description: "–ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ",
  authorId: "user_id",
  sharedWith: {
    users: ["user_id_1", "user_id_2"],
    teams: ["team_id_1"]
  },
  attachments: [
    {
      name: "mockup.png",
      url: "https://...",
      size: 2048,
      uploadedAt: Timestamp
    }
  ],
  createdAt: Timestamp,
  updatedAt: Timestamp
}
```

### üìÅ sketches/{sketchId}/comments

```javascript
{
  id: "comment_id",
  userId: "user_id",
  text: "–ò–Ω—Ç–µ—Ä–µ—Å–Ω–∞—è –∏–¥–µ—è! @username",
  mentions: ["user_id_1"],
  createdAt: Timestamp,
  updatedAt: Timestamp
}
```

### üìÅ projects

```javascript
{
  id: "project_id",
  name: "–ü—Ä–æ–µ–∫—Ç –ê–ª—å—Ñ–∞",
  description: "–û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞",
  teamId: "team_id",               // null –µ—Å–ª–∏ –ª–∏—á–Ω—ã–π
  createdBy: "user_id",
  members: {
    "user_id_1": "owner",
    "user_id_2": "editor"
  },
  createdAt: Timestamp
}
```

### üìÅ projects/{projectId}/items

```javascript
{
  id: "item_id",
  type: "board",                   // 'board' | 'task' | 'sketch'
  itemId: "board_id",              // ID –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞
  addedBy: "user_id",
  addedAt: Timestamp
}
```

### üìÅ notifications

```javascript
{
  id: "notification_id",
  type: "task_assigned",           // –°–º. —Ç–∏–ø—ã –Ω–∏–∂–µ
  userId: "user_id",               // –ö–æ–º—É
  title: "–í–∞–º –Ω–∞–∑–Ω–∞—á–µ–Ω–∞ –∑–∞–¥–∞—á–∞",
  message: "–ó–∞–¥–∞—á–∞ '–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é' –Ω–∞–∑–Ω–∞—á–µ–Ω–∞ –≤–∞–º",
  taskId: "task_id",               // –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
  actorId: "user_id",              // –ö—Ç–æ —Å–æ–≤–µ—Ä—à–∏–ª –¥–µ–π—Å—Ç–≤–∏–µ
  link: "/board/board_id",         // –ö—É–¥–∞ –≤–µ—Å—Ç–∏
  read: false,
  createdAt: Timestamp,
  readAt: Timestamp                // –ö–æ–≥–¥–∞ –ø—Ä–æ—á–∏—Ç–∞–Ω–æ
}
```

**–¢–∏–ø—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π:**
- `task_assigned` - –ù–∞–∑–Ω–∞—á–µ–Ω–∞ –∑–∞–¥–∞—á–∞
- `task_comment` - –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ –∑–∞–¥–∞—á–µ
- `task_mention` - –£–ø–æ–º–∏–Ω–∞–Ω–∏–µ –≤ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
- `task_deadline` - –ü—Ä–∏–±–ª–∏–∂–∞–µ—Ç—Å—è –¥–µ–¥–ª–∞–π–Ω
- `task_updated` - –ó–∞–¥–∞—á–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∞
- `team_invitation` - –ü—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ –≤ –∫–æ–º–∞–Ω–¥—É
- `team_mention` - –£–ø–æ–º–∏–Ω–∞–Ω–∏–µ –≤ —á–∞—Ç–µ
- `user_approved` - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ–¥–æ–±—Ä–µ–Ω

### üìÅ userSettings

```javascript
{
  id: "user_id",                   // Document ID = userId
  emailNotifications: {
    newTasks: true,
    comments: true,
    deadlines: true
  },
  interface: {
    darkMode: false,
    showTooltips: true
  }
}
```

---

# 8. –°–µ—Ä–≤–∏—Å—ã (Services)

## 8.1 auth.service.js

### –ú–µ—Ç–æ–¥—ã

#### register(userData)
–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

```javascript
// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
const result = await authService.register({
  email: "user@example.com",
  password: "password123",
  firstName: "–ò–≤–∞–Ω",
  middleName: "–ò–≤–∞–Ω–æ–≤–∏—á",
  lastName: "–ò–≤–∞–Ω–æ–≤",
  position: "Developer",
  responsibility: "Backend development"
});

if (result.success) {
  console.log('User registered:', result.user);
}
```

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
1. –°–æ–∑–¥–∞–µ—Ç—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤ Firebase Auth
2. –°–æ–∑–¥–∞–µ—Ç—Å—è –¥–æ–∫—É–º–µ–Ω—Ç –≤ `users` —Å —Ä–æ–ª—å—é `pending`
3. –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∞–≤–∞—Ç–∞—Ä `generated`
4. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è `teamLimit: 10`

#### login(email, password)
–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

```javascript
const result = await authService.login("user@example.com", "password123");

if (result.success) {
  console.log('Logged in:', result.user);
  // result.user —Å–æ–¥–µ—Ä–∂–∏—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ Firestore
}
```

#### logout()
–í—ã—Ö–æ–¥ –∏–∑ —Å–∏—Å—Ç–µ–º—ã.

```javascript
await authService.logout();
```

#### getCurrentUser()
–ü–æ–ª—É—á–∏—Ç—å —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

```javascript
const user = await authService.getCurrentUser();
console.log(user); // { uid, email, firstName, ... }
```

#### onAuthStateChanged(callback)
–ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏.

```javascript
useEffect(() => {
  const unsubscribe = authService.onAuthStateChanged((currentUser) => {
    setUser(currentUser);
    setLoading(false);
  });
  
  return () => unsubscribe();
}, []);
```

---

## 8.2 board.service.js

### –ú–µ—Ç–æ–¥—ã

#### createBoard(title, ownerId)
–°–æ–∑–¥–∞—Ç—å –¥–æ—Å–∫—É —Å –¥–µ—Ñ–æ–ª—Ç–Ω—ã–º–∏ –∫–æ–ª–æ–Ω–∫–∞–º–∏.

```javascript
const result = await boardService.createBoard("–ü—Ä–æ–µ–∫—Ç X", user.uid);

if (result.success) {
  console.log('Board created:', result.id);
}
```

**–î–µ—Ñ–æ–ª—Ç–Ω—ã–µ –∫–æ–ª–æ–Ω–∫–∏:**
1. üìã –ó–∞–¥–∞—á–∞ –ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∞
2. üî® –í —Ä–∞–±–æ—Ç–µ
3. üîç –°–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ
4. ‚úÖ –ì–æ—Ç–æ–≤–æ
5. ‚è∏Ô∏è –û—Ç–ª–æ–∂–µ–Ω–∞
6. ‚ùå –û—Ç–º–µ–Ω–µ–Ω–∞

#### getUserBoards(userId)
–ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –¥–æ—Å–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

```javascript
const result = await boardService.getUserBoards(user.uid);

if (result.success) {
  console.log('Boards:', result.boards);
}
```

#### subscribeToUserBoards(userId, callback)
Real-time –ø–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –¥–æ—Å–∫–∏.

```javascript
useEffect(() => {
  const unsubscribe = boardService.subscribeToUserBoards(user.uid, (boards) => {
    setBoards(boards);
  });
  
  return () => unsubscribe();
}, [user.uid]);
```

#### subscribeToBoard(boardId, callback)
–ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –¥–æ—Å–∫—É.

```javascript
useEffect(() => {
  const unsubscribe = boardService.subscribeToBoard(boardId, (board) => {
    setBoard(board);
  });
  
  return () => unsubscribe();
}, [boardId]);
```

#### subscribeToColumns(boardId, callback)
–ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –∫–æ–ª–æ–Ω–∫–∏ –¥–æ—Å–∫–∏.

```javascript
useEffect(() => {
  const unsubscribe = boardService.subscribeToColumns(boardId, (columns) => {
    setColumns(columns);
  });
  
  return () => unsubscribe();
}, [boardId]);
```

#### addColumn(boardId, title, color)
–î–æ–±–∞–≤–∏—Ç—å –∫–æ–ª–æ–Ω–∫—É.

```javascript
await boardService.addColumn(boardId, "üéâ –ì–æ—Ç–æ–≤–æ –∫ –¥–µ–ø–ª–æ—é", "#4caf50");
```

#### deleteColumn(boardId, columnId)
–£–¥–∞–ª–∏—Ç—å –∫–æ–ª–æ–Ω–∫—É.

```javascript
await boardService.deleteColumn(boardId, columnId);
```

#### updateBoardTitle(boardId, newTitle)
–û–±–Ω–æ–≤–∏—Ç—å –Ω–∞–∑–≤–∞–Ω–∏–µ –¥–æ—Å–∫–∏.

```javascript
await boardService.updateBoardTitle(boardId, "–ù–æ–≤–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ");
```

#### updateColumnTitle(boardId, columnId, newTitle)
–û–±–Ω–æ–≤–∏—Ç—å –Ω–∞–∑–≤–∞–Ω–∏–µ –∫–æ–ª–æ–Ω–∫–∏.

```javascript
await boardService.updateColumnTitle(boardId, columnId, "‚ú® –ù–æ–≤–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ");
```

#### addMember(boardId, userId, role)
–î–æ–±–∞–≤–∏—Ç—å —É—á–∞—Å—Ç–Ω–∏–∫–∞ –Ω–∞ –¥–æ—Å–∫—É.

```javascript
await boardService.addMember(boardId, userId, "editor"); // 'owner' | 'editor' | 'viewer'
```

#### removeMember(boardId, userId)
–£–¥–∞–ª–∏—Ç—å —É—á–∞—Å—Ç–Ω–∏–∫–∞.

```javascript
await boardService.removeMember(boardId, userId);
```

#### updateMovePermissions(boardId, columnId, roles)
–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∫—Ç–æ –º–æ–∂–µ—Ç –ø–µ—Ä–µ–º–µ—â–∞—Ç—å –≤ –∫–æ–ª–æ–Ω–∫—É.

```javascript
await boardService.updateMovePermissions(boardId, columnId, ["owner", "editor"]);
```

---

## 8.3 task.service.js

### –ú–µ—Ç–æ–¥—ã

#### createTask(boardId, taskData, userId)
–°–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É.

```javascript
const result = await taskService.createTask(boardId, {
  title: "–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å API",
  description: "–°–æ–∑–¥–∞—Ç—å REST API –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏",
  columnId: columnId,
  priority: "urgent",
  tags: ["backend", "api"],
  dueDate: "2024-12-31"
}, user.uid);
```

#### getTasks(boardId)
–ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –∑–∞–¥–∞—á–∏ –¥–æ—Å–∫–∏.

```javascript
const result = await taskService.getTasks(boardId);
console.log(result.tasks);
```

#### subscribeToTasks(boardId, callback)
Real-time –ø–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –∑–∞–¥–∞—á–∏.

```javascript
useEffect(() => {
  const unsubscribe = taskService.subscribeToTasks(boardId, (tasks) => {
    setTasks(tasks);
  });
  
  return () => unsubscribe();
}, [boardId]);
```

#### getTask(boardId, taskId)
–ü–æ–ª—É—á–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –∑–∞–¥–∞—á—É.

```javascript
const result = await taskService.getTask(boardId, taskId);
console.log(result.task);
```

#### subscribeToTask(boardId, taskId, callback)
–ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –∑–∞–¥–∞—á—É.

```javascript
useEffect(() => {
  const unsubscribe = taskService.subscribeToTask(boardId, taskId, (task) => {
    setTask(task);
  });
  
  return () => unsubscribe();
}, [boardId, taskId]);
```

#### updateTask(boardId, taskId, updates, userId)
–û–±–Ω–æ–≤–∏—Ç—å –∑–∞–¥–∞—á—É —Å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏–π.

```javascript
await taskService.updateTask(boardId, taskId, {
  title: "–ù–æ–≤–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ",
  priority: "urgent"
}, user.uid);
```

**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:**
- –õ–æ–≥–∏—Ä—É–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ `activity`
- –û–±–Ω–æ–≤–ª—è–µ—Ç `updatedAt`

#### moveTask(boardId, taskId, newColumnId, newOrder, userId)
–ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –∑–∞–¥–∞—á—É –≤ –¥—Ä—É–≥—É—é –∫–æ–ª–æ–Ω–∫—É.

```javascript
await taskService.moveTask(boardId, taskId, newColumnId, 0, user.uid);
```

**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:**
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ (`whoCanMoveToStatus`)
- –õ–æ–≥–∏—Ä—É–µ—Ç –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ

#### deleteTask(boardId, taskId)
–£–¥–∞–ª–∏—Ç—å –∑–∞–¥–∞—á—É.

```javascript
await taskService.deleteTask(boardId, taskId);
```

**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:**
- –£–¥–∞–ª—è–µ—Ç –≤—Å–µ –≤–ª–æ–∂–µ–Ω–∏—è –∏–∑ Storage
- –£–¥–∞–ª—è–µ—Ç –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
- –£–¥–∞–ª—è–µ—Ç activity

#### uploadFile(boardId, taskId, file)
–ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª.

```javascript
const result = await taskService.uploadFile(boardId, taskId, file);

if (result.success) {
  console.log('File URL:', result.url);
  console.log('File name:', result.name);
}
```

**–ü—É—Ç—å –≤ Storage:**
`boards/{boardId}/tasks/{taskId}/{timestamp}_{filename}`

#### deleteFile(url)
–£–¥–∞–ª–∏—Ç—å —Ñ–∞–π–ª.

```javascript
await taskService.deleteFile(fileUrl);
```

#### addComment(boardId, taskId, userId, text, mentions)
–î–æ–±–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π.

```javascript
const result = await taskService.addComment(
  boardId,
  taskId,
  user.uid,
  "–û—Ç–ª–∏—á–Ω–∞—è —Ä–∞–±–æ—Ç–∞! @username",
  ["user_id_1"]
);
```

**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:**
- –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —É–ø–æ–º—è–Ω—É—Ç—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º

#### deleteComment(boardId, taskId, commentId)
–£–¥–∞–ª–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π.

```javascript
await taskService.deleteComment(boardId, taskId, commentId);
```

#### subscribeToComments(boardId, taskId, callback)
–ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏.

```javascript
useEffect(() => {
  const unsubscribe = taskService.subscribeToComments(boardId, taskId, (comments) => {
    setComments(comments);
  });
  
  return () => unsubscribe();
}, [boardId, taskId]);
```

#### logActivity(boardId, taskId, type, userId, details, changes)
–ó–∞–ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å –¥–µ–π—Å—Ç–≤–∏–µ (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ —Å–µ—Ä–≤–∏—Å–∞).

```javascript
await taskService.logActivity(
  boardId,
  taskId,
  "task_updated",
  user.uid,
  { field: "title" },
  { oldValue: "–°—Ç–∞—Ä–æ–µ", newValue: "–ù–æ–≤–æ–µ" }
);
```

#### getActivity(boardId, taskId)
–ü–æ–ª—É—á–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é –∏–∑–º–µ–Ω–µ–Ω–∏–π.

```javascript
const result = await taskService.getActivity(boardId, taskId);
console.log(result.activities);
```

#### subscribeToActivity(boardId, taskId, callback)
–ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ activity.

```javascript
useEffect(() => {
  const unsubscribe = taskService.subscribeToActivity(boardId, taskId, (activities) => {
    setActivities(activities);
  });
  
  return () => unsubscribe();
}, [boardId, taskId]);
```

---

## 8.4 team.service.js

### –ú–µ—Ç–æ–¥—ã

#### createTeam(teamData, userId)
–°–æ–∑–¥–∞—Ç—å –∫–æ–º–∞–Ω–¥—É.

```javascript
const result = await teamService.createTeam({
  name: "Backend Team",
  description: "–ö–æ–º–∞–Ω–¥–∞ backend —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏",
  image: "üöÄ",
  members: ["user_id_1", "user_id_2"] // –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ - –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–π
}, user.uid);

if (result.success) {
  console.log('Team ID:', result.id);
}
```

**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:**
- –°–æ–∑–¥–∞—Ç–µ–ª—å —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –ª–∏–¥–µ—Ä–æ–º
- –£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è `teamsCount` –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –û—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è —É–∫–∞–∑–∞–Ω–Ω—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º

#### getUserTeams(userId)
–ü–æ–ª—É—á–∏—Ç—å –∫–æ–º–∞–Ω–¥—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

```javascript
const result = await teamService.getUserTeams(user.uid);
console.log(result.teams);
```

#### subscribeToUserTeams(userId, callback)
Real-time –ø–æ–¥–ø–∏—Å–∫–∞.

```javascript
useEffect(() => {
  const unsubscribe = teamService.subscribeToUserTeams(user.uid, (teams) => {
    setTeams(teams);
  });
  
  return () => unsubscribe();
}, [user.uid]);
```

#### inviteUser(teamId, userId, invitedBy)
–ü—Ä–∏–≥–ª–∞—Å–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (—Ç–æ–ª—å–∫–æ –ª–∏–¥–µ—Ä).

```javascript
const result = await teamService.inviteUser(teamId, userId, user.uid);
```

**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:**
- –°–æ–∑–¥–∞–µ—Ç –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º `pending`
- –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ `team_invitation`

#### getUserInvitations(userId)
–ü–æ–ª—É—á–∏—Ç—å –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

```javascript
const result = await teamService.getUserInvitations(user.uid);
console.log(result.invitations);
```

#### acceptInvitation(teamId, invitationId, userId)
–ü—Ä–∏–Ω—è—Ç—å –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ.

```javascript
await teamService.acceptInvitation(teamId, invitationId, user.uid);
```

**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:**
- –î–æ–±–∞–≤–ª—è–µ—Ç –≤ `members` —Å —Ä–æ–ª—å—é `member`
- –£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç `teamsCount`
- –ú–µ–Ω—è–µ—Ç —Å—Ç–∞—Ç—É—Å –Ω–∞ `accepted`

#### rejectInvitation(teamId, invitationId)
–û—Ç–∫–ª–æ–Ω–∏—Ç—å –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ.

```javascript
await teamService.rejectInvitation(teamId, invitationId);
```

#### leaveTeam(teamId, userId)
–í—ã–π—Ç–∏ –∏–∑ –∫–æ–º–∞–Ω–¥—ã.

```javascript
const result = await teamService.leaveTeam(teamId, user.uid);

if (!result.success) {
  alert(result.message); // "–õ–∏–¥–µ—Ä –Ω–µ –º–æ–∂–µ—Ç –≤—ã–π—Ç–∏ –∏–∑ –∫–æ–º–∞–Ω–¥—ã"
}
```

#### removeMember(teamId, userId, removedBy)
–£–¥–∞–ª–∏—Ç—å —É—á–∞—Å—Ç–Ω–∏–∫–∞ (—Ç–æ–ª—å–∫–æ –ª–∏–¥–µ—Ä).

```javascript
await teamService.removeMember(teamId, userId, user.uid);
```

#### deleteTeam(teamId, userId)
–£–¥–∞–ª–∏—Ç—å –∫–æ–º–∞–Ω–¥—É (—Ç–æ–ª—å–∫–æ –ª–∏–¥–µ—Ä).

```javascript
await teamService.deleteTeam(teamId, user.uid);
```

**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:**
- –£–º–µ–Ω—å—à–∞–µ—Ç `teamsCount` —É –≤—Å–µ—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
- –£–¥–∞–ª—è–µ—Ç –≤—Å—é –ø–æ–¥–∫–æ–ª–ª–µ–∫—Ü–∏—é (invitations, chat)

#### sendMessage(teamId, userId, text, mentions, attachments)
–û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ —á–∞—Ç.

```javascript
await teamService.sendMessage(
  teamId,
  user.uid,
  "–ü—Ä–∏–≤–µ—Ç –∫–æ–º–∞–Ω–¥–∞! @username",
  ["user_id_1"],
  []
);
```

**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:**
- –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è `team_mention` —É–ø–æ–º—è–Ω—É—Ç—ã–º

#### subscribeToChat(teamId, callback)
–ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ —á–∞—Ç –∫–æ–º–∞–Ω–¥—ã.

```javascript
useEffect(() => {
  const unsubscribe = teamService.subscribeToChat(teamId, (messages) => {
    setMessages(messages);
  });
  
  return () => unsubscribe();
}, [teamId]);
```

---

## 8.5 sketch.service.js

### –ú–µ—Ç–æ–¥—ã

#### createSketch(sketchData, userId)
–°–æ–∑–¥–∞—Ç—å –Ω–∞–±—Ä–æ—Å–æ–∫.

```javascript
const result = await sketchService.createSketch({
  title: "–ò–¥–µ—è –¥–ª—è —Ñ–∏—á–∏",
  description: "–ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ"
}, user.uid);
```

#### getUserSketches(userId)
–ü–æ–ª—É—á–∏—Ç—å –Ω–∞–±—Ä–æ—Å–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

```javascript
const result = await sketchService.getUserSketches(user.uid);
```

#### getAccessibleSketches(userId, userTeams)
–ü–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã–µ –Ω–∞–±—Ä–æ—Å–∫–∏ (—Å–≤–æ–∏ + shared).

```javascript
const result = await sketchService.getAccessibleSketches(
  user.uid,
  ["team_id_1", "team_id_2"]
);
```

#### subscribeToSketch(sketchId, callback)
–ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –Ω–∞–±—Ä–æ—Å–æ–∫.

```javascript
useEffect(() => {
  const unsubscribe = sketchService.subscribeToSketch(sketchId, (sketch) => {
    setSketch(sketch);
  });
  
  return () => unsubscribe();
}, [sketchId]);
```

#### updateSketch(sketchId, updates)
–û–±–Ω–æ–≤–∏—Ç—å –Ω–∞–±—Ä–æ—Å–æ–∫.

```javascript
await sketchService.updateSketch(sketchId, {
  title: "–ù–æ–≤–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ",
  description: "–û–±–Ω–æ–≤–ª–µ–Ω–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ"
});
```

#### shareWithUser(sketchId, userId)
–ü–æ–¥–µ–ª–∏—Ç—å—Å—è —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º.

```javascript
await sketchService.shareWithUser(sketchId, userId);
```

#### shareWithTeam(sketchId, teamId)
–ü–æ–¥–µ–ª–∏—Ç—å—Å—è —Å –∫–æ–º–∞–Ω–¥–æ–π.

```javascript
await sketchService.shareWithTeam(sketchId, teamId);
```

#### addComment(sketchId, userId, text, mentions)
–î–æ–±–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π.

```javascript
await sketchService.addComment(
  sketchId,
  user.uid,
  "–ò–Ω—Ç–µ—Ä–µ—Å–Ω–∞—è –∏–¥–µ—è! @username",
  ["user_id_1"]
);
```

#### updateComment(sketchId, commentId, text)
–û–±–Ω–æ–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π.

```javascript
await sketchService.updateComment(sketchId, commentId, "–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç");
```

#### deleteComment(sketchId, commentId)
–£–¥–∞–ª–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π.

```javascript
await sketchService.deleteComment(sketchId, commentId);
```

#### subscribeToComments(sketchId, callback)
–ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏.

```javascript
useEffect(() => {
  const unsubscribe = sketchService.subscribeToComments(sketchId, (comments) => {
    setComments(comments);
  });
  
  return () => unsubscribe();
}, [sketchId]);
```

#### deleteSketch(sketchId)
–£–¥–∞–ª–∏—Ç—å –Ω–∞–±—Ä–æ—Å–æ–∫.

```javascript
await sketchService.deleteSketch(sketchId);
```

---

## 8.6 notification.service.js

### –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã

```javascript
const TYPES = {
  TASK_ASSIGNED: 'task_assigned',
  TASK_COMMENT: 'task_comment',
  TASK_MENTION: 'task_mention',
  TASK_DEADLINE: 'task_deadline',
  TASK_UPDATED: 'task_updated',
  TEAM_INVITATION: 'team_invitation',
  TEAM_MENTION: 'team_mention',
  USER_APPROVED: 'user_approved'
};
```

### –ú–µ—Ç–æ–¥—ã

#### create(notificationData)
–°–æ–∑–¥–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ.

```javascript
await notificationService.create({
  type: 'task_assigned',
  userId: 'user_id',
  title: '–ù–æ–≤–∞—è –∑–∞–¥–∞—á–∞',
  message: '–í–∞–º –Ω–∞–∑–Ω–∞—á–µ–Ω–∞ –∑–∞–¥–∞—á–∞ "–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å API"',
  taskId: 'task_id',
  actorId: user.uid,
  link: '/board/board_id'
});
```

**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:**
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç email –µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω–æ (–ø–æ–∫–∞ –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ)

#### subscribeToUserNotifications(userId, callback)
–ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

```javascript
useEffect(() => {
  const unsubscribe = notificationService.subscribeToUserNotifications(
    user.uid,
    (notifications) => {
      setNotifications(notifications);
    }
  );
  
  return () => unsubscribe();
}, [user.uid]);
```

#### getUnreadCount(userId)
–ü–æ–ª—É—á–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã—Ö.

```javascript
const count = await notificationService.getUnreadCount(user.uid);
```

#### markAsRead(notificationId)
–û—Ç–º–µ—Ç–∏—Ç—å –∫–∞–∫ –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω–æ–µ.

```javascript
await notificationService.markAsRead(notificationId);
```

#### markAllAsRead(userId)
–û—Ç–º–µ—Ç–∏—Ç—å –≤—Å–µ –∫–∞–∫ –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–µ.

```javascript
await notificationService.markAllAsRead(user.uid);
```

#### –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã

##### notifyTaskAssigned(taskId, assigneeId, taskTitle, actorId, boardId)

```javascript
await notificationService.notifyTaskAssigned(
  taskId,
  assigneeId,
  "–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å API",
  user.uid,
  boardId
);
```

##### notifyTaskComment(taskId, taskTitle, commentText, authorId, boardId)

```javascript
await notificationService.notifyTaskComment(
  taskId,
  "–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å API",
  "–û—Ç–ª–∏—á–Ω–∞—è —Ä–∞–±–æ—Ç–∞!",
  user.uid,
  boardId
);
```

##### notifyTaskMention(taskId, mentionedUserId, taskTitle, authorId, boardId)

```javascript
await notificationService.notifyTaskMention(
  taskId,
  mentionedUserId,
  "–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å API",
  user.uid,
  boardId
);
```

##### notifyTaskDeadline(taskId, assigneeId, taskTitle, dueDate, boardId)

```javascript
await notificationService.notifyTaskDeadline(
  taskId,
  assigneeId,
  "–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å API",
  "2024-12-31",
  boardId
);
```

##### notifyUserApproved(userId)

```javascript
await notificationService.notifyUserApproved(userId);
```

---

## 8.7 user.service.js

### –ú–µ—Ç–æ–¥—ã

#### getAllUsers()
–ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.

```javascript
const result = await userService.getAllUsers();
console.log(result.users);
```

#### subscribeToUsers(callback)
Real-time –ø–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.

```javascript
useEffect(() => {
  const unsubscribe = userService.subscribeToUsers((users) => {
    setUsers(users);
  });
  
  return () => unsubscribe();
}, []);
```

#### getPendingUsers()
–ü–æ–ª—É—á–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –Ω–∞ –º–æ–¥–µ—Ä–∞—Ü–∏–∏.

```javascript
const result = await userService.getPendingUsers();
console.log(result.users); // role === 'pending'
```

#### approveUser(userId, approvedBy)
–û–¥–æ–±—Ä–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

```javascript
await userService.approveUser(userId, user.uid);
```

**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:**
- –ú–µ–Ω—è–µ—Ç —Ä–æ–ª—å `pending` ‚Üí `user`
- –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç `approvedBy` –∏ `approvedAt`
- –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ `user_approved`

#### rejectUser(userId)
–û—Ç–∫–ª–æ–Ω–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

```javascript
await userService.rejectUser(userId);
```

**–£–¥–∞–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ Firestore.**

#### changeUserRole(userId, newRole)
–ò–∑–º–µ–Ω–∏—Ç—å —Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

```javascript
await userService.changeUserRole(userId, "admin"); // 'user' | 'admin'
```

#### getUser(userId)
–ü–æ–ª—É—á–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

```javascript
const result = await userService.getUser(userId);
console.log(result.user);
```

#### updateAvatar(userId, avatar)
–û–±–Ω–æ–≤–∏—Ç—å –∞–≤–∞—Ç–∞—Ä.

```javascript
await userService.updateAvatar(user.uid, "default-5"); // –∏–ª–∏ 'generated' –∏–ª–∏ URL
```

#### updateContacts(userId, contacts)
–û–±–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ç–∞–∫—Ç—ã.

```javascript
await userService.updateContacts(user.uid, {
  whatsapp: "+79991234567",
  telegram: "@username",
  phone: "+79991234567"
});
```

#### updateTeamLimit(userId, newLimit)
–û–±–Ω–æ–≤–∏—Ç—å –ª–∏–º–∏—Ç –∫–æ–º–∞–Ω–¥ (—Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω).

```javascript
await userService.updateTeamLimit(userId, 20);
```

#### updateUserData(userId, updates)
–û–±–Ω–æ–≤–∏—Ç—å –ª—é–±—ã–µ –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

```javascript
await userService.updateUserData(user.uid, {
  firstName: "–ò–≤–∞–Ω",
  position: "Senior Developer",
  contacts: { ... }
});
```

---

## 8.8 ai.service.js

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

```javascript
const API_KEY = "AIzaSyB8zF91xZeGD4vz92T6_0dEilbrmQieiJs";
const MODEL_NAME = "gemini-2.5-pro";

const generationConfig = {
  temperature: 0.7,
  topP: 0.95,
  topK: 40,
  maxOutputTokens: 8192,
};
```

### –ú–µ—Ç–æ–¥—ã

#### analyzeRecap(recapText, context)
–ê–Ω–∞–ª–∏–∑ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ –≤—Å—Ç—Ä–µ—á–∏.

```javascript
const result = await aiService.analyzeRecap(
  "–ü—Ä–æ—Ç–æ–∫–æ–ª –≤—Å—Ç—Ä–µ—á–∏: –æ–±—Å—É–¥–∏–ª–∏ –Ω–æ–≤—ã–π API...",
  {
    boards: boards,
    tags: allTags,
    users: users
  }
);

if (result.success) {
  console.log('Tasks:', result.tasks);
  console.log('Summary:', result.summary);
  console.log('Action Items:', result.actionItems);
}
```

**–§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞ AI:**
```json
{
  "tasks": [
    {
      "title": "–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å REST API",
      "description": "–°–æ–∑–¥–∞—Ç—å endpoints –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏",
      "boardId": "board_id",
      "assigneeId": "user_id",
      "priority": "urgent",
      "tags": ["backend", "api"],
      "dueDate": "2024-12-31"
    }
  ],
  "summary": "–ö—Ä–∞—Ç–∫–æ–µ —Ä–µ–∑—é–º–µ –≤—Å—Ç—Ä–µ—á–∏",
  "actionItems": ["–ü—É–Ω–∫—Ç 1", "–ü—É–Ω–∫—Ç 2"]
}
```

#### splitTask(task, context)
–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏ –Ω–∞ –ø–æ–¥–∑–∞–¥–∞—á–∏.

```javascript
const result = await aiService.splitTask(
  {
    title: "–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å–∏—Å—Ç–µ–º—É –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏",
    description: "–ü–æ–ª–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Å JWT —Ç–æ–∫–µ–Ω–∞–º–∏"
  },
  {
    boards: boards,
    tags: allTags,
    users: users
  }
);

if (result.success) {
  console.log('Subtasks:', result.subtasks);
}
```

**–§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞ AI:**
```json
{
  "subtasks": [
    {
      "title": "–ù–∞—Å—Ç—Ä–æ–∏—Ç—å JWT –±–∏–±–ª–∏–æ—Ç–µ–∫—É",
      "description": "–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å jsonwebtoken",
      "estimatedTime": "2 —á–∞—Å–∞"
    },
    {
      "title": "–°–æ–∑–¥–∞—Ç—å endpoint /login",
      "description": "–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è",
      "estimatedTime": "4 —á–∞—Å–∞"
    }
  ]
}
```

#### buildSystemPrompt(boards, tags, users)
–ü–æ—Å—Ç—Ä–æ–∏—Ç—å —Å–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤–Ω—É—Ç—Ä–∏).

```javascript
const prompt = aiService.buildSystemPrompt(boards, tags, users);
```

**–°–æ–¥–µ—Ä–∂–∏—Ç:**
- –°–ø–∏—Å–æ–∫ –¥–æ—Å–æ–∫ —Å ID
- –°–ø–∏—Å–æ–∫ —Ç–µ–≥–æ–≤
- –°–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å ID
- –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —Ñ–æ—Ä–º–∞—Ç—É –æ—Ç–≤–µ—Ç–∞

#### parseAIResponse(text)
–ü–∞—Ä—Å–∏–Ω–≥ –æ—Ç–≤–µ—Ç–∞ AI (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤–Ω—É—Ç—Ä–∏).

```javascript
const parsed = aiService.parseAIResponse(aiResponseText);
console.log(parsed); // JSON –æ–±—ä–µ–∫—Ç
```

**–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç:**
- –ò–∑–≤–ª–µ–∫–∞–µ—Ç JSON –∏–∑ markdown –∫–æ–¥–∞
- –£–±–∏—Ä–∞–µ—Ç ```json –∏ ```
- –ü–∞—Ä—Å–∏—Ç JSON

---

# 9. –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (Components)

## 9.1 Layout/MainLayout.jsx

–ì–ª–∞–≤–Ω—ã–π layout –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

### Props

```javascript
{
  children: ReactNode,      // –°–æ–¥–µ—Ä–∂–∏–º–æ–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
  title: string,            // –ó–∞–≥–æ–ª–æ–≤–æ–∫ –≤ AppBar
  showAppBar: boolean       // –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –ª–∏ AppBar (default: true)
}
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```javascript
<MainLayout title="–ö–∞–ª–µ–Ω–¥–∞—Ä—å">
  <CalendarPage />
</MainLayout>
```

### –ß—Ç–æ –≤–∫–ª—é—á–∞–µ—Ç

- **Sidebar** - –±–æ–∫–æ–≤–æ–µ –º–µ–Ω—é
- **AppBar** - –≤–µ—Ä—Ö–Ω—è—è –ø–∞–Ω–µ–ª—å —Å –∑–∞–≥–æ–ª–æ–≤–∫–æ–º
- **NotificationCenter** - –∏–∫–æ–Ω–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- **DebugConsole** - –∫–Ω–æ–ø–∫–∞ –æ—Ç–ª–∞–¥–∫–∏ (üêõ)
- **Content area** - –æ–±–ª–∞—Å—Ç—å –∫–æ–Ω—Ç–µ–Ω—Ç–∞ —Å padding

### State

```javascript
const [sidebarOpen, setSidebarOpen] = useState(true);
const [boards, setBoards] = useState([]);
const [debugOpen, setDebugOpen] = useState(false);
```

### –ü–æ–¥–ø–∏—Å–∫–∏

```javascript
useEffect(() => {
  const unsubscribe = boardService.subscribeToUserBoards(user.uid, (boards) => {
    setBoards(boards);
  });
  
  return () => unsubscribe();
}, [user]);
```

---

## 9.2 Layout/Sidebar.jsx

–ë–æ–∫–æ–≤–æ–µ –º–µ–Ω—é –Ω–∞–≤–∏–≥–∞—Ü–∏–∏.

### Props

```javascript
{
  open: boolean,           // –û—Ç–∫—Ä—ã—Ç –ª–∏ sidebar
  onClose: function,       // Callback –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏
  boards: Array            // –°–ø–∏—Å–æ–∫ –¥–æ—Å–æ–∫ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
}
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–µ–Ω—é

```javascript
const menuItems = [
  { title: '–ì–ª–∞–≤–Ω–∞—è', icon: <Dashboard />, path: '/' },
  { title: '–ö–∞–ª–µ–Ω–¥–∞—Ä—å', icon: <Event />, path: '/calendar' },
  { title: '–ú–æ–∏ –∑–∞–¥–∞—á–∏', icon: <Assignment />, path: '/my-tasks' },
  { title: '–ö–æ–º–∞–Ω–¥–∞', icon: <Group />, path: '/team' },
  { title: '–ù–∞–±—Ä–æ—Å–∫–∏', icon: <Description />, path: '/sketches' },
];

// –¢–æ–ª—å–∫–æ –¥–ª—è –∞–¥–º–∏–Ω–æ–≤
if (user?.role === 'admin') {
  menuItems.push({ title: '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏', icon: <People />, path: '/users' });
}

menuItems.push(
  { title: '–ù–∞—Å—Ç—Ä–æ–π–∫–∏', icon: <Settings />, path: '/settings' },
  { title: '–ü—Ä–æ—Ñ–∏–ª—å', icon: <Person />, path: '/profile' }
);
```

### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- **Collapsible –¥–æ—Å–∫–∏** - –ø–µ—Ä–≤—ã–µ 5 –¥–æ—Å–æ–∫ —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é —Ä–∞—Å–∫—Ä—ã—Ç–∏—è
- **–ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è** - –∞–≤–∞—Ç–∞—Ä, –∏–º—è, –¥–æ–ª–∂–Ω–æ—Å—Ç—å
- **–¢–µ–º–∞** - –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —Ç–µ–º–Ω–æ–π —Ç–µ–º—ã
- **–í—ã—Ö–æ–¥** - –∫–Ω–æ–ø–∫–∞ logout

---

## 9.3 Kanban/KanbanColumn.jsx

–ö–æ–ª–æ–Ω–∫–∞ Kanban –¥–æ—Å–∫–∏.

### Props

```javascript
{
  column: {
    id: string,
    title: string,
    color: string
  },
  tasks: Array,            // –ó–∞–¥–∞—á–∏ –≤ –∫–æ–ª–æ–Ω–∫–µ
  onTaskClick: function,   // –ö–ª–∏–∫ –ø–æ –∑–∞–¥–∞—á–µ
  onTaskMove: function,    // –ü–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏
  board: Object            // –î–æ—Å–∫–∞ (–¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–∞–≤)
}
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```javascript
<KanbanColumn
  column={column}
  tasks={tasksInColumn}
  onTaskClick={(task) => setSelectedTask(task)}
  onTaskMove={(taskId, newColumnId) => handleMove(taskId, newColumnId)}
  board={board}
/>
```

### Drag & Drop

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç **@dnd-kit**:

```javascript
<SortableContext items={tasks.map(t => t.id)} strategy={verticalListSortingStrategy}>
  {tasks.map(task => (
    <SortableTaskCard key={task.id} task={task} />
  ))}
</SortableContext>
```

---

## 9.4 Kanban/TaskCard.jsx

–ö–∞—Ä—Ç–æ—á–∫–∞ –∑–∞–¥–∞—á–∏ –Ω–∞ –¥–æ—Å–∫–µ.

### Props

```javascript
{
  task: {
    id: string,
    title: string,
    description: string,
    priority: string,
    tags: Array,
    assigneeId: string,
    dueDate: string
  },
  onClick: function,       // –ö–ª–∏–∫ –ø–æ –∫–∞—Ä—Ç–æ—á–∫–µ
  users: Array             // –°–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
}
```

### –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ

```javascript
<Card onClick={() => onClick(task)}>
  <CardContent>
    {/* –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç */}
    {task.priority === 'urgent' && <Chip label="–°—Ä–æ—á–Ω–æ" color="error" />}
    
    {/* –ó–∞–≥–æ–ª–æ–≤–æ–∫ */}
    <Typography variant="h6">{task.title}</Typography>
    
    {/* –¢–µ–≥–∏ */}
    {task.tags.map(tag => <Chip key={tag} label={tag} />)}
    
    {/* –ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å */}
    <Avatar src={getAssigneeAvatar()} />
    
    {/* –î–µ–¥–ª–∞–π–Ω */}
    {task.dueDate && <Typography>{formatDate(task.dueDate)}</Typography>}
  </CardContent>
</Card>
```

### –¶–≤–µ—Ç–∞ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤

```javascript
const priorityColors = {
  normal: 'default',
  urgent: 'error',
  recurring: 'info'
};
```

---

## 9.5 Kanban/TaskModal.jsx

–ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∑–∞–¥–∞—á–∏.

### Props

```javascript
{
  open: boolean,
  onClose: function,
  task: Object,
  boardId: string,
  onUpdate: function       // Callback –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
}
```

### Tabs

1. **–î–µ—Ç–∞–ª–∏** - –æ–ø–∏—Å–∞–Ω–∏–µ, assignee, priority, tags, dueDate
2. **–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏** - —Å–ø–∏—Å–æ–∫ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –¥–æ–±–∞–≤–ª–µ–Ω–∏—è
3. **–í–ª–æ–∂–µ–Ω–∏—è** - —Ñ–∞–π–ª—ã —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –∑–∞–≥—Ä—É–∑–∫–∏/—É–¥–∞–ª–µ–Ω–∏—è
4. **–ò—Å—Ç–æ—Ä–∏—è** - activity log

### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

```javascript
// –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏
const handleUpdate = async (field, value) => {
  await taskService.updateTask(boardId, task.id, {
    [field]: value
  }, user.uid);
};

// –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è
const handleAddComment = async () => {
  const mentions = extractMentions(commentText);
  await taskService.addComment(boardId, task.id, user.uid, commentText, mentions);
  setCommentText('');
};

// –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞
const handleFileUpload = async (file) => {
  const result = await taskService.uploadFile(boardId, task.id, file);
  if (result.success) {
    // –û–±–Ω–æ–≤–∏—Ç—å —Å–ø–∏—Å–æ–∫ –≤–ª–æ–∂–µ–Ω–∏–π
  }
};
```

### @mentions

```javascript
const extractMentions = (text) => {
  const regex = /@(\w+)/g;
  const mentions = [];
  let match;
  
  while ((match = regex.exec(text)) !== null) {
    const username = match[1];
    const user = users.find(u => 
      u.firstName.toLowerCase() === username.toLowerCase()
    );
    if (user) mentions.push(user.id);
  }
  
  return mentions;
};
```

---

## 9.6 AI/AIAnalyzer.jsx

AI –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤ –≤—Å—Ç—Ä–µ—á.

### Props

```javascript
{
  open: boolean,
  onClose: function,
  boards: Array,
  users: Array,
  allTags: Array,
  onTasksCreated: function  // Callback –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–¥–∞—á
}
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```javascript
<AIAnalyzer
  open={analyzerOpen}
  onClose={() => setAnalyzerOpen(false)}
  boards={boards}
  users={users}
  allTags={allTags}
  onTasksCreated={() => {
    loadTasks();
    setAnalyzerOpen(false);
  }}
/>
```

### –ü—Ä–æ—Ü–µ—Å—Å –∞–Ω–∞–ª–∏–∑–∞

```javascript
const handleAnalyze = async () => {
  setAnalyzing(true);
  
  // 1. –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞
  const result = await aiService.analyzeRecap(recapText, {
    boards,
    tags: allTags,
    users
  });
  
  if (result.success) {
    // 2. –ü–æ–∫–∞–∑–∞—Ç—å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏
    setSuggestedTasks(result.tasks);
    setSummary(result.summary);
    setActionItems(result.actionItems);
  }
  
  setAnalyzing(false);
};

const handleCreateTasks = async () => {
  // 3. –°–æ–∑–¥–∞—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏
  for (const task of selectedTasks) {
    await taskService.createTask(task.boardId, task, user.uid);
  }
  
  onTasksCreated();
};
```

### UI

```javascript
<Dialog open={open} onClose={onClose} maxWidth="md" fullWidth>
  <DialogTitle>AI –ê–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤</DialogTitle>
  <DialogContent>
    {/* Textarea –¥–ª—è –≤–≤–æ–¥–∞ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ */}
    <TextField
      multiline
      rows={10}
      value={recapText}
      onChange={(e) => setRecapText(e.target.value)}
      placeholder="–í—Å—Ç–∞–≤—å—Ç–µ —Ç–µ–∫—Å—Ç –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ –≤—Å—Ç—Ä–µ—á–∏..."
    />
    
    {analyzing && <CircularProgress />}
    
    {/* –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞–Ω–∞–ª–∏–∑–∞ */}
    {summary && <Alert severity="info">{summary}</Alert>}
    
    {/* –°–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á */}
    {suggestedTasks.map(task => (
      <Card key={task.id}>
        <Checkbox
          checked={selectedTasks.includes(task)}
          onChange={() => toggleTask(task)}
        />
        <Typography>{task.title}</Typography>
        {/* ... */}
      </Card>
    ))}
  </DialogContent>
  <DialogActions>
    <Button onClick={handleAnalyze} disabled={!recapText}>
      –ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å
    </Button>
    <Button onClick={handleCreateTasks} disabled={!selectedTasks.length}>
      –°–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á–∏ ({selectedTasks.length})
    </Button>
  </DialogActions>
</Dialog>
```

---

## 9.7 Team/CreateTeamDialog.jsx

–î–∏–∞–ª–æ–≥ —Å–æ–∑–¥–∞–Ω–∏—è –∫–æ–º–∞–Ω–¥—ã.

### Props

```javascript
{
  open: boolean,
  onClose: function,
  onCreated: function      // Callback –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è
}
```

### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

```javascript
const [formData, setFormData] = useState({
  name: '',
  description: '',
  image: 'üöÄ',            // –≠–º–æ–¥–∑–∏ –∞–≤–∞—Ç–∞—Ä –∫–æ–º–∞–Ω–¥—ã
  members: []             // –í—ã–±—Ä–∞–Ω–Ω—ã–µ —É—á–∞—Å—Ç–Ω–∏–∫–∏
});

const handleCreate = async () => {
  const result = await teamService.createTeam(formData, user.uid);
  
  if (result.success) {
    // –û—Ç–ø—Ä–∞–≤–∏—Ç—å –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è
    for (const userId of formData.members) {
      await teamService.inviteUser(result.id, userId, user.uid);
    }
    
    onCreated();
    onClose();
  }
};
```

### UI —ç–ª–µ–º–µ–Ω—Ç—ã

1. **–í—ã–±–æ—Ä –∞–≤–∞—Ç–∞—Ä–∞ –∫–æ–º–∞–Ω–¥—ã** - —Å–µ—Ç–∫–∞ —ç–º–æ–¥–∑–∏
2. **–ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã** - TextField
3. **–û–ø–∏—Å–∞–Ω–∏–µ** - TextField multiline
4. **–í—ã–±–æ—Ä —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤** - Select multiple —Å —á–∏–ø–∞–º–∏

---

## 9.8 Team/UserProfileModal.jsx

–ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø—Ä–æ—Ñ–∏–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

### Props

```javascript
{
  open: boolean,
  onClose: function,
  user: Object,            // –ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞–µ–º—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
  currentUser: Object      // –¢–µ–∫—É—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
}
```

### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

```javascript
const canEdit = currentUser.role === 'admin' || currentUser.uid === user.id;

const [isEditing, setIsEditing] = useState(false);
const [editData, setEditData] = useState({...});

const handleSave = async () => {
  await userService.updateUserData(user.id, editData);
  setIsEditing(false);
};
```

### –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ

1. **–ê–≤–∞—Ç–∞—Ä** —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –∏–∑–º–µ–Ω–µ–Ω–∏—è
2. **–§–ò–û, –¥–æ–ª–∂–Ω–æ—Å—Ç—å, –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å**
3. **–ö–æ–Ω—Ç–∞–∫—Ç—ã** —Å –∏–∫–æ–Ω–∫–∞–º–∏ WhatsApp, Telegram, Email
4. **–î–æ—Å–∫–∏** - —Å–ø–∏—Å–æ–∫ –æ–±—â–∏—Ö –¥–æ—Å–æ–∫ —Å —Ä–æ–ª—è–º–∏
5. **–ö–Ω–æ–ø–∫–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è** (–µ—Å–ª–∏ –µ—Å—Ç—å –ø—Ä–∞–≤–∞)

### –ö–æ–Ω—Ç–∞–∫—Ç—ã

```javascript
const openWhatsApp = () => {
  const phone = user.contacts?.whatsapp || user.contacts?.phone;
  if (phone) {
    window.open(`https://wa.me/${phone.replace(/\D/g, '')}`, '_blank');
  }
};

const openTelegram = () => {
  const telegram = user.contacts?.telegram;
  if (telegram) {
    const username = telegram.startsWith('@') ? telegram.slice(1) : telegram;
    window.open(`https://t.me/${username}`, '_blank');
  }
};
```

---

## 9.9 Sketch/SketchModal.jsx

–ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –Ω–∞–±—Ä–æ—Å–∫–∞.

### Props

```javascript
{
  open: boolean,
  onClose: function,
  sketch: Object,
  teams: Array             // –ö–æ–º–∞–Ω–¥—ã –¥–ª—è —à–∞—Ä–∏–Ω–≥–∞
}
```

### Tabs

1. **–û–ø–∏—Å–∞–Ω–∏–µ** - —Ç–µ–∫—Å—Ç –Ω–∞–±—Ä–æ—Å–∫–∞
2. **–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏** - –æ–±—Å—É–∂–¥–µ–Ω–∏–µ

### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

```javascript
// –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (—Ç–æ–ª—å–∫–æ –∞–≤—Ç–æ—Ä)
const [isEditing, setIsEditing] = useState(false);

const handleSave = async () => {
  await sketchService.updateSketch(sketch.id, {
    title: editData.title,
    description: editData.description
  });
  setIsEditing(false);
};

// –®–∞—Ä–∏–Ω–≥
const handleShare = async () => {
  if (shareType === 'user') {
    await sketchService.shareWithUser(sketch.id, shareTarget);
  } else {
    await sketchService.shareWithTeam(sketch.id, shareTarget);
  }
};

// –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
const handleAddComment = async () => {
  const mentions = extractMentions(newComment);
  await sketchService.addComment(sketch.id, user.uid, newComment, mentions);
  setNewComment('');
};
```

---

## 9.10 Profile/AvatarSelector.jsx

–î–∏–∞–ª–æ–≥ –≤—ã–±–æ—Ä–∞ –∞–≤–∞—Ç–∞—Ä–∞.

### Props

```javascript
{
  open: boolean,
  onClose: function,
  onSelect: function,      // Callback —Å –≤—ã–±—Ä–∞–Ω–Ω—ã–º –∞–≤–∞—Ç–∞—Ä–æ–º
  currentAvatar: string,
  firstName: string,
  lastName: string
}
```

### Tabs

1. **–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ** - 25 SVG –∞–≤–∞—Ç–∞—Ä–æ–∫
2. **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è** - –±—É–∫–≤–∞ –Ω–∞ —Ü–≤–µ—Ç–Ω–æ–º —Ñ–æ–Ω–µ

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```javascript
<AvatarSelector
  open={avatarSelectorOpen}
  onClose={() => setAvatarSelectorOpen(false)}
  onSelect={async (avatar) => {
    await userService.updateAvatar(user.uid, avatar);
    setUser({ ...user, avatar });
  }}
  currentAvatar={user.avatar}
  firstName={user.firstName}
  lastName={user.lastName}
/>
```

### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∞–≤–∞—Ç–∞—Ä–∞

```javascript
import { generateLetterAvatar } from '../../utils/avatarGenerator';

const avatarSrc = generateLetterAvatar(firstName, lastName);
// –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç data:image/svg+xml;base64,...
```

---

## 9.11 Notifications/NotificationCenter.jsx

–¶–µ–Ω—Ç—Ä —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –≤ AppBar.

### State

```javascript
const [notifications, setNotifications] = useState([]);
const [unreadCount, setUnreadCount] = useState(0);
const [anchorEl, setAnchorEl] = useState(null);
```

### Real-time –ø–æ–¥–ø–∏—Å–∫–∞

```javascript
useEffect(() => {
  const unsubscribe = notificationService.subscribeToUserNotifications(
    user.uid,
    (notifs) => {
      setNotifications(notifs);
      setUnreadCount(notifs.filter(n => !n.read).length);
    }
  );
  
  return () => unsubscribe();
}, [user.uid]);
```

### UI

```javascript
<IconButton onClick={(e) => setAnchorEl(e.currentTarget)}>
  <Badge badgeContent={unreadCount} color="error">
    <Notifications />
  </Badge>
</IconButton>

<Menu anchorEl={anchorEl} open={Boolean(anchorEl)}>
  {notifications.map(notification => (
    <MenuItem
      key={notification.id}
      onClick={() => {
        notificationService.markAsRead(notification.id);
        navigate(notification.link);
      }}
      sx={{
        bgcolor: notification.read ? 'transparent' : 'action.hover'
      }}
    >
      {/* –ò–∫–æ–Ω–∫–∞ –ø–æ —Ç–∏–ø—É */}
      <ListItemIcon>
        {getNotificationIcon(notification.type)}
      </ListItemIcon>
      
      {/* –¢–µ–∫—Å—Ç */}
      <ListItemText
        primary={notification.title}
        secondary={notification.message}
      />
      
      {/* –í—Ä–µ–º—è */}
      <Typography variant="caption">
        {formatDistanceToNow(notification.createdAt, { locale: ru })}
      </Typography>
    </MenuItem>
  ))}
  
  <Divider />
  <MenuItem onClick={() => notificationService.markAllAsRead(user.uid)}>
    –ü—Ä–æ—á–∏—Ç–∞—Ç—å –≤—Å–µ
  </MenuItem>
</Menu>
```

### –ò–∫–æ–Ω–∫–∏ –ø–æ —Ç–∏–ø–∞–º

```javascript
const getNotificationIcon = (type) => {
  switch (type) {
    case 'task_assigned': return <Assignment />;
    case 'task_comment': return <Comment />;
    case 'task_mention': return <AlternateEmail />;
    case 'task_deadline': return <Event />;
    case 'team_invitation': return <Group />;
    case 'user_approved': return <CheckCircle />;
    default: return <Notifications />;
  }
};
```

---

## 9.12 DebugConsole.jsx

–ö–æ–Ω—Å–æ–ª—å –æ—Ç–ª–∞–¥–∫–∏.

### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

- –ü–µ—Ä–µ—Ö–≤–∞—Ç `console.error` –∏ `console.warn`
- –•—Ä–∞–Ω–µ–Ω–∏–µ –ª–æ–≥–æ–≤ –≤ `window.appLogs`
- –≠–∫—Å–ø–æ—Ä—Ç –ª–æ–≥–æ–≤ –≤ JSON
- –û—á–∏—Å—Ç–∫–∞ –ª–æ–≥–æ–≤

### –û—Ç–∫—Ä—ã—Ç–∏–µ

```javascript
// –í MainLayout.jsx
<Fab
  color="error"
  sx={{ position: 'fixed', bottom: 88, right: 24 }}
  onClick={() => setDebugOpen(true)}
>
  <BugReport />
</Fab>

<DebugConsole open={debugOpen} onClose={() => setDebugOpen(false)} />
```

### –ü–µ—Ä–µ—Ö–≤–∞—Ç –ª–æ–≥–æ–≤

```javascript
// –ì–ª–æ–±–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ
window.appLogs = window.appLogs || [];

// –ü–µ—Ä–µ—Ö–≤–∞—Ç console.error
const originalError = console.error;
console.error = (...args) => {
  originalError(...args);
  window.appLogs.push({
    type: 'error',
    message: args.join(' '),
    timestamp: new Date(),
    stack: new Error().stack
  });
};
```

### UI

```javascript
<Drawer anchor="right" open={open} onClose={onClose}>
  <Box sx={{ width: 500, p: 2 }}>
    <Typography variant="h6">Debug Console</Typography>
    
    <Button onClick={downloadLogs}>
      <Download /> –≠–∫—Å–ø–æ—Ä—Ç –ª–æ–≥–æ–≤
    </Button>
    
    <Button onClick={() => window.appLogs = []}>
      <Delete /> –û—á–∏—Å—Ç–∏—Ç—å
    </Button>
    
    <List>
      {logs.map((log, index) => (
        <ListItem key={index}>
          <Chip
            label={log.type}
            color={log.type === 'error' ? 'error' : 'warning'}
          />
          <Typography>{log.message}</Typography>
          <Typography variant="caption">
            {format(log.timestamp, 'HH:mm:ss')}
          </Typography>
        </ListItem>
      ))}
    </List>
  </Box>
</Drawer>
```

---

# 10. –°—Ç—Ä–∞–Ω–∏—Ü—ã (Pages)

## 10.1 LoginPage.jsx

–°—Ç—Ä–∞–Ω–∏—Ü–∞ –≤—Ö–æ–¥–∞.

### State

```javascript
const [formData, setFormData] = useState({
  email: '',
  password: ''
});
const [error, setError] = useState('');
const [loading, setLoading] = useState(false);
```

### –õ–æ–≥–∏–Ω

```javascript
const handleLogin = async (e) => {
  e.preventDefault();
  setLoading(true);
  setError('');
  
  const result = await authService.login(formData.email, formData.password);
  
  if (result.success) {
    setUser(result.user);
    navigate('/');
  } else {
    setError(result.message);
  }
  
  setLoading(false);
};
```

### UI

```javascript
<Box sx={{ maxWidth: 400, mx: 'auto', mt: 8 }}>
  <Typography variant="h4">–í—Ö–æ–¥</Typography>
  
  {error && <Alert severity="error">{error}</Alert>}
  
  <form onSubmit={handleLogin}>
    <TextField
      fullWidth
      label="Email"
      type="email"
      value={formData.email}
      onChange={(e) => setFormData({ ...formData, email: e.target.value })}
    />
    
    <TextField
      fullWidth
      label="–ü–∞—Ä–æ–ª—å"
      type="password"
      value={formData.password}
      onChange={(e) => setFormData({ ...formData, password: e.target.value })}
    />
    
    <Button
      fullWidth
      type="submit"
      variant="contained"
      disabled={loading}
    >
      {loading ? <CircularProgress size={24} /> : '–í–æ–π—Ç–∏'}
    </Button>
  </form>
  
  <Link to="/register">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</Link>
</Box>
```

---

## 10.2 RegisterPage.jsx

–°—Ç—Ä–∞–Ω–∏—Ü–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏.

### Form Data

```javascript
const [formData, setFormData] = useState({
  email: '',
  password: '',
  confirmPassword: '',
  firstName: '',
  middleName: '',
  lastName: '',
  position: '',
  responsibility: ''
});
```

### –í–∞–ª–∏–¥–∞—Ü–∏—è

```javascript
const validateForm = () => {
  if (!formData.email || !formData.password) {
    return '–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è';
  }
  
  if (formData.password !== formData.confirmPassword) {
    return '–ü–∞—Ä–æ–ª–∏ –Ω–µ —Å–æ–≤–ø–∞–¥–∞—é—Ç';
  }
  
  if (formData.password.length < 6) {
    return '–ü–∞—Ä–æ–ª—å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–µ –º–µ–Ω–µ–µ 6 —Å–∏–º–≤–æ–ª–æ–≤';
  }
  
  return null;
};
```

### –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è

```javascript
const handleRegister = async (e) => {
  e.preventDefault();
  
  const error = validateForm();
  if (error) {
    setError(error);
    return;
  }
  
  setLoading(true);
  
  const result = await authService.register(formData);
  
  if (result.success) {
    navigate('/pending'); // –°—Ç—Ä–∞–Ω–∏—Ü–∞ –æ–∂–∏–¥–∞–Ω–∏—è –æ–¥–æ–±—Ä–µ–Ω–∏—è
  } else {
    setError(result.message);
  }
  
  setLoading(false);
};
```

---

## 10.3 DashboardPage.jsx

–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞.

### –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ

```javascript
<MainLayout title="–ì–ª–∞–≤–Ω–∞—è">
  <Grid container spacing={3}>
    {/* –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ */}
    <Grid item xs={12}>
      <Typography variant="h4">
        –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, {user.firstName}!
      </Typography>
    </Grid>
    
    {/* –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ */}
    <Grid item xs={12} md={4}>
      <Card>
        <CardContent>
          <Typography variant="h6">–ê–∫—Ç–∏–≤–Ω—ã–µ –∑–∞–¥–∞—á–∏</Typography>
          <Typography variant="h3">{activeTasksCount}</Typography>
        </CardContent>
      </Card>
    </Grid>
    
    {/* –ú–æ–∏ –¥–æ—Å–∫–∏ */}
    <Grid item xs={12}>
      <Typography variant="h5">–ú–æ–∏ –¥–æ—Å–∫–∏</Typography>
      <Grid container spacing={2}>
        {boards.map(board => (
          <Grid item xs={12} sm={6} md={4} key={board.id}>
            <Card onClick={() => navigate(`/board/${board.id}`)}>
              <CardContent>
                <Typography variant="h6">{board.title}</Typography>
                <Typography variant="body2">
                  {getBoardTasksCount(board.id)} –∑–∞–¥–∞—á
                </Typography>
              </CardContent>
            </Card>
          </Grid>
        ))}
      </Grid>
    </Grid>
    
    {/* –°–æ–∑–¥–∞—Ç—å –¥–æ—Å–∫—É */}
    <Grid item xs={12}>
      <Button
        variant="contained"
        startIcon={<Add />}
        onClick={handleCreateBoard}
      >
        –°–æ–∑–¥–∞—Ç—å –¥–æ—Å–∫—É
      </Button>
    </Grid>
  </Grid>
</MainLayout>
```

### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

```javascript
const [boards, setBoards] = useState([]);
const [activeTasksCount, setActiveTasksCount] = useState(0);

useEffect(() => {
  loadData();
}, [user]);

const loadData = async () => {
  const boardsResult = await boardService.getUserBoards(user.uid);
  setBoards(boardsResult.boards);
  
  // –ü–æ–¥—Å—á–∏—Ç–∞—Ç—å –∞–∫—Ç–∏–≤–Ω—ã–µ –∑–∞–¥–∞—á–∏
  let count = 0;
  for (const board of boardsResult.boards) {
    const tasksResult = await taskService.getTasks(board.id);
    count += tasksResult.tasks.filter(t => t.columnId !== 'done').length;
  }
  setActiveTasksCount(count);
};

const handleCreateBoard = async () => {
  const title = prompt('–ù–∞–∑–≤–∞–Ω–∏–µ –¥–æ—Å–∫–∏:');
  if (title) {
    const result = await boardService.createBoard(title, user.uid);
    if (result.success) {
      navigate(`/board/${result.id}`);
    }
  }
};
```

---

## 10.4 BoardPage.jsx

–°—Ç—Ä–∞–Ω–∏—Ü–∞ Kanban –¥–æ—Å–∫–∏.

### URL –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

```javascript
const { boardId } = useParams();
```

### State

```javascript
const [board, setBoard] = useState(null);
const [columns, setColumns] = useState([]);
const [tasks, setTasks] = useState([]);
const [selectedTask, setSelectedTask] = useState(null);
const [users, setUsers] = useState([]);
const [loading, setLoading] = useState(true);
```

### –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö

```javascript
useEffect(() => {
  loadBoardData();
}, [boardId]);

const loadBoardData = async () => {
  setLoading(true);
  
  // –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –¥–æ—Å–∫—É
  const unsubBoard = boardService.subscribeToBoard(boardId, (boardData) => {
    setBoard(boardData);
  });
  
  // –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –∫–æ–ª–æ–Ω–∫–∏
  const unsubColumns = boardService.subscribeToColumns(boardId, (columnsData) => {
    setColumns(columnsData);
  });
  
  // –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –∑–∞–¥–∞—á–∏
  const unsubTasks = taskService.subscribeToTasks(boardId, (tasksData) => {
    setTasks(tasksData);
  });
  
  // –ó–∞–≥—Ä—É–∑–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
  const usersResult = await userService.getAllUsers();
  setUsers(usersResult.users);
  
  setLoading(false);
  
  return () => {
    unsubBoard();
    unsubColumns();
    unsubTasks();
  };
};
```

### Drag & Drop

```javascript
import { DndContext, closestCenter, PointerSensor, useSensor, useSensors } from '@dnd-kit/core';

const sensors = useSensors(
  useSensor(PointerSensor, {
    activationConstraint: { distance: 8 }
  })
);

const handleDragEnd = async (event) => {
  const { active, over } = event;
  
  if (!over) return;
  
  const taskId = active.id;
  const newColumnId = over.id;
  
  const task = tasks.find(t => t.id === taskId);
  
  if (task.columnId !== newColumnId) {
    await taskService.moveTask(boardId, taskId, newColumnId, 0, user.uid);
  }
};
```

### Render

```javascript
<MainLayout title={board?.title || '–î–æ—Å–∫–∞'}>
  {loading ? (
    <CircularProgress />
  ) : (
    <DndContext sensors={sensors} collisionDetection={closestCenter} onDragEnd={handleDragEnd}>
      <Box sx={{ display: 'flex', gap: 2, overflowX: 'auto' }}>
        {columns.map(column => (
          <KanbanColumn
            key={column.id}
            column={column}
            tasks={tasks.filter(t => t.columnId === column.id)}
            onTaskClick={(task) => setSelectedTask(task)}
            board={board}
          />
        ))}
      </Box>
    </DndContext>
  )}
  
  {selectedTask && (
    <TaskModal
      open={Boolean(selectedTask)}
      onClose={() => setSelectedTask(null)}
      task={selectedTask}
      boardId={boardId}
      onUpdate={() => loadBoardData()}
    />
  )}
</MainLayout>
```

---

## 10.5 CalendarPage.jsx

–°—Ç—Ä–∞–Ω–∏—Ü–∞ –∫–∞–ª–µ–Ω–¥–∞—Ä—è —Å 5 –º–∞—Å—à—Ç–∞–±–∞–º–∏.

### State

```javascript
const [currentDate, setCurrentDate] = useState(new Date());
const [viewMode, setViewMode] = useState('month'); // 'year' | 'quarter' | 'month' | 'week' | 'day'
const [allTasks, setAllTasks] = useState([]);
const [filteredTasks, setFilteredTasks] = useState([]);
const [filters, setFilters] = useState({
  myTasks: true,
  assignedToOthers: false,
  urgent: true,
  normal: true,
  recurring: true,
  assignees: [],
  boards: [],
  tags: []
});
```

### –ú–∞—Å—à—Ç–∞–±—ã

#### Year View

```javascript
const renderYearView = () => {
  const months = Array.from({ length: 12 }, (_, i) => i);
  
  return (
    <Grid container spacing={2}>
      {months.map(month => {
        const monthDate = new Date(currentDate.getFullYear(), month, 1);
        const tasksCount = getTasksInMonth(monthDate).length;
        
        return (
          <Grid item xs={3} key={month}>
            <Card
              onClick={() => {
                setCurrentDate(monthDate);
                setViewMode('month');
              }}
              sx={{ cursor: 'pointer', '&:hover': { boxShadow: 3 } }}
            >
              <CardContent>
                <Typography variant="h6">
                  {format(monthDate, 'LLLL', { locale: ru })}
                </Typography>
                <Typography variant="body2">
                  {tasksCount} –∑–∞–¥–∞—á
                </Typography>
              </CardContent>
            </Card>
          </Grid>
        );
      })}
    </Grid>
  );
};
```

#### Month View (—Å Drag & Drop)

```javascript
const renderMonthView = () => {
  const monthStart = startOfMonth(currentDate);
  const monthEnd = endOfMonth(currentDate);
  const startDate = startOfWeek(monthStart, { locale: ru });
  const endDate = endOfWeek(monthEnd, { locale: ru });
  
  const days = [];
  let day = startDate;
  
  while (day <= endDate) {
    days.push(day);
    day = addDays(day, 1);
  }
  
  return (
    <DndContext sensors={sensors} onDragEnd={handleDragEnd}>
      <Grid container spacing={1}>
        {days.map(day => (
          <Grid item xs={12/7} key={day.toString()}>
            <DroppableDay
              date={day}
              tasks={getTasksOnDate(day)}
              isCurrentMonth={isSameMonth(day, currentDate)}
              onClick={() => {
                setCurrentDate(day);
                setViewMode('day');
              }}
            />
          </Grid>
        ))}
      </Grid>
    </DndContext>
  );
};
```

#### Day View

```javascript
const renderDayView = () => {
  const tasks = getTasksOnDate(currentDate);
  
  return (
    <Box>
      <Typography variant="h5">
        {format(currentDate, 'd MMMM yyyy', { locale: ru })}
      </Typography>
      
      <List>
        {tasks.length === 0 ? (
          <Typography>–ù–µ—Ç –∑–∞–¥–∞—á –Ω–∞ —ç—Ç–æ—Ç –¥–µ–Ω—å</Typography>
        ) : (
          tasks.map(task => (
            <ListItem key={task.id}>
              <TaskCard task={task} onClick={() => setSelectedTask(task)} />
            </ListItem>
          ))
        )}
      </List>
      
      <Button
        variant="contained"
        startIcon={<Add />}
        onClick={() => handleCreateTask(currentDate)}
      >
        –î–æ–±–∞–≤–∏—Ç—å –∑–∞–¥–∞—á—É
      </Button>
    </Box>
  );
};
```

### Drag & Drop –≤ –∫–∞–ª–µ–Ω–¥–∞—Ä–µ

```javascript
const handleDragEnd = async (event) => {
  const { active, over } = event;
  
  if (!over) return;
  
  const taskId = active.id;
  const newDateStr = over.id; // ID = –¥–∞—Ç–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ YYYY-MM-DD
  
  const task = allTasks.find(t => t.id === taskId);
  
  // –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∞
  const board = boards.find(b => b.id === task.boardId);
  if (!canEditBoard(board)) {
    alert('–ù–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ');
    return;
  }
  
  // –û–±–Ω–æ–≤–∏—Ç—å –¥–µ–¥–ª–∞–π–Ω
  await taskService.updateTask(task.boardId, taskId, {
    dueDate: newDateStr
  }, user.uid);
  
  // –û—Ç–ø—Ä–∞–≤–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
  if (task.assigneeId && task.assigneeId !== user.uid) {
    await notificationService.create({
      type: 'task_updated',
      userId: task.assigneeId,
      title: '–ò–∑–º–µ–Ω—ë–Ω –¥–µ–¥–ª–∞–π–Ω –∑–∞–¥–∞—á–∏',
      message: `–î–µ–¥–ª–∞–π–Ω –∑–∞–¥–∞—á–∏ "${task.title}" –∏–∑–º–µ–Ω—ë–Ω –Ω–∞ ${format(new Date(newDateStr), 'd MMMM yyyy', { locale: ru })}`,
      taskId: task.id,
      actorId: user.uid,
      link: `/board/${task.boardId}`
    });
  }
};
```

### –§–∏–ª—å—Ç—Ä—ã

```javascript
const applyFilters = () => {
  let filtered = [...allTasks];
  
  // –ü–æ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–Ω–æ—Å—Ç–∏
  if (filters.myTasks && !filters.assignedToOthers) {
    filtered = filtered.filter(t => t.assigneeId === user.uid);
  } else if (!filters.myTasks && filters.assignedToOthers) {
    filtered = filtered.filter(t => t.assigneeId !== user.uid);
  }
  
  // –ü–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—É
  const priorities = [];
  if (filters.urgent) priorities.push('urgent');
  if (filters.normal) priorities.push('normal');
  if (filters.recurring) priorities.push('recurring');
  
  filtered = filtered.filter(t => priorities.includes(t.priority));
  
  // –ü–æ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è–º
  if (filters.assignees.length > 0) {
    filtered = filtered.filter(t => filters.assignees.includes(t.assigneeId));
  }
  
  // –ü–æ –¥–æ—Å–∫–∞–º
  if (filters.boards.length > 0) {
    filtered = filtered.filter(t => filters.boards.includes(t.boardId));
  }
  
  // –ü–æ —Ç–µ–≥–∞–º
  if (filters.tags.length > 0) {
    filtered = filtered.filter(t => 
      t.tags.some(tag => filters.tags.includes(tag))
    );
  }
  
  setFilteredTasks(filtered);
};

useEffect(() => {
  applyFilters();
}, [allTasks, filters]);
```

---

## 10.6 MyTasksPage.jsx

–°—Ç—Ä–∞–Ω–∏—Ü–∞ "–ú–æ–∏ –∑–∞–¥–∞—á–∏".

### –§–∏–ª—å—Ç—Ä—ã

```javascript
const [filter, setFilter] = useState('all'); // 'all' | 'assigned' | 'created' | 'urgent'
```

### –ó–∞–≥—Ä—É–∑–∫–∞ –∑–∞–¥–∞—á

```javascript
useEffect(() => {
  loadMyTasks();
}, [user, filter]);

const loadMyTasks = async () => {
  const boardsResult = await boardService.getUserBoards(user.uid);
  const allTasks = [];
  
  for (const board of boardsResult.boards) {
    const tasksResult = await taskService.getTasks(board.id);
    allTasks.push(...tasksResult.tasks);
  }
  
  let filtered = allTasks;
  
  switch (filter) {
    case 'assigned':
      filtered = allTasks.filter(t => t.assigneeId === user.uid);
      break;
    case 'created':
      filtered = allTasks.filter(t => t.creatorId === user.uid);
      break;
    case 'urgent':
      filtered = allTasks.filter(t => t.priority === 'urgent');
      break;
  }
  
  setTasks(filtered);
};
```

### Render

```javascript
<MainLayout title="–ú–æ–∏ –∑–∞–¥–∞—á–∏">
  <Box sx={{ mb: 2 }}>
    <ButtonGroup>
      <Button
        variant={filter === 'all' ? 'contained' : 'outlined'}
        onClick={() => setFilter('all')}
      >
        –í—Å–µ
      </Button>
      <Button
        variant={filter === 'assigned' ? 'contained' : 'outlined'}
        onClick={() => setFilter('assigned')}
      >
        –ù–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–µ –º–Ω–µ
      </Button>
      <Button
        variant={filter === 'created' ? 'contained' : 'outlined'}
        onClick={() => setFilter('created')}
      >
        –°–æ–∑–¥–∞–Ω–Ω—ã–µ –º–Ω–æ–π
      </Button>
      <Button
        variant={filter === 'urgent' ? 'contained' : 'outlined'}
        onClick={() => setFilter('urgent')}
      >
        –°—Ä–æ—á–Ω—ã–µ
      </Button>
    </ButtonGroup>
  </Box>
  
  <List>
    {tasks.map(task => (
      <ListItem key={task.id}>
        <TaskCard
          task={task}
          onClick={() => setSelectedTask(task)}
          users={users}
        />
      </ListItem>
    ))}
  </List>
</MainLayout>
```

---

## 10.7 TeamPage.jsx

–°—Ç—Ä–∞–Ω–∏—Ü–∞ –∫–æ–º–∞–Ω–¥—ã.

### Tabs

```javascript
const [activeTab, setActiveTab] = useState(0); // 0 = –í—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏, 1 = –ú–æ–∏ –∫–æ–º–∞–Ω–¥—ã
```

### –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö

```javascript
useEffect(() => {
  loadData();
}, [user]);

const loadData = async () => {
  // –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
  const usersResult = await userService.getAllUsers();
  setUsers(usersResult.users.filter(u => u.role !== 'pending'));
  
  // –ö–æ–º–∞–Ω–¥—ã
  const teamsResult = await teamService.getUserTeams(user.uid);
  setTeams(teamsResult.teams);
};
```

### Render

```javascript
<MainLayout title="–ö–æ–º–∞–Ω–¥–∞">
  <Tabs value={activeTab} onChange={(e, v) => setActiveTab(v)}>
    <Tab icon={<People />} label="–í—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏" />
    <Tab icon={<Group />} label={`–ú–æ–∏ –∫–æ–º–∞–Ω–¥—ã (${teams.length})`} />
  </Tabs>
  
  {activeTab === 0 && (
    <Box>
      <TextField
        fullWidth
        placeholder="–ü–æ–∏—Å–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π..."
        value={searchQuery}
        onChange={(e) => setSearchQuery(e.target.value)}
      />
      
      <Grid container spacing={2}>
        {filteredUsers.map(user => (
          <Grid item xs={12} sm={6} md={4} lg={3} key={user.id}>
            <Card onClick={() => handleUserClick(user)}>
              <CardContent>
                <Avatar src={getAvatarSrc(user)} />
                <Typography>{user.firstName} {user.lastName}</Typography>
                <Typography variant="body2">{user.position}</Typography>
              </CardContent>
            </Card>
          </Grid>
        ))}
      </Grid>
    </Box>
  )}
  
  {activeTab === 1 && (
    <Box>
      <Grid container spacing={2}>
        {teams.map(team => (
          <Grid item xs={12} sm={6} md={4} key={team.id}>
            <TeamCard team={team} onUpdate={loadData} />
          </Grid>
        ))}
      </Grid>
      
      <Fab
        color="primary"
        sx={{ position: 'fixed', bottom: 16, right: 16 }}
        onClick={() => setCreateTeamOpen(true)}
      >
        <Add />
      </Fab>
    </Box>
  )}
  
  <UserProfileModal
    open={profileModalOpen}
    onClose={() => setProfileModalOpen(false)}
    user={selectedUser}
    currentUser={user}
  />
  
  <CreateTeamDialog
    open={createTeamOpen}
    onClose={() => setCreateTeamOpen(false)}
    onCreated={loadData}
  />
</MainLayout>
```

---

## 10.8 SketchesPage.jsx

–°—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–∞–±—Ä–æ—Å–∫–æ–≤.

### State

```javascript
const [sketches, setSketches] = useState([]);
const [teams, setTeams] = useState([]);
const [createDialogOpen, setCreateDialogOpen] = useState(false);
const [selectedSketch, setSelectedSketch] = useState(null);
```

### –ó–∞–≥—Ä—É–∑–∫–∞

```javascript
useEffect(() => {
  loadData();
}, [user]);

const loadData = async () => {
  setLoading(true);
  
  const teamsResult = await teamService.getUserTeams(user.uid);
  const userTeams = teamsResult.success ? teamsResult.teams.map(t => t.id) : [];
  setTeams(teamsResult.teams || []);
  
  const sketchesResult = await sketchService.getAccessibleSketches(user.uid, userTeams);
  if (sketchesResult.success) {
    setSketches(sketchesResult.sketches);
  }
  
  setLoading(false);
};
```

### –°–æ–∑–¥–∞–Ω–∏–µ

```javascript
const handleCreate = async () => {
  if (!newSketchData.title.trim()) {
    alert('–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ');
    return;
  }
  
  setCreating(true);
  const result = await sketchService.createSketch(newSketchData, user.uid);
  
  if (result.success) {
    setNewSketchData({ title: '', description: '' });
    setCreateDialogOpen(false);
    await loadData();
  }
  setCreating(false);
};
```

### Render

```javascript
<MainLayout title="–ù–∞–±—Ä–æ—Å–∫–∏">
  <Grid container spacing={2}>
    {sketches.map(sketch => (
      <Grid item xs={12} sm={6} md={4} key={sketch.id}>
        <Card onClick={() => setSelectedSketch(sketch)}>
          <CardContent>
            <Typography variant="h6">{sketch.title}</Typography>
            <Typography variant="body2" color="text.secondary">
              {sketch.description?.substring(0, 100)}...
            </Typography>
            <Chip
              label={sketch.authorId === user.uid ? '–ú–æ–π' : '–û–±—â–∏–π'}
              size="small"
            />
          </CardContent>
        </Card>
      </Grid>
    ))}
  </Grid>
  
  <Fab
    color="primary"
    sx={{ position: 'fixed', bottom: 16, right: 16 }}
    onClick={() => setCreateDialogOpen(true)}
  >
    <Add />
  </Fab>
  
  <SketchModal
    open={Boolean(selectedSketch)}
    onClose={() => {
      setSelectedSketch(null);
      loadData();
    }}
    sketch={selectedSketch}
    teams={teams}
  />
</MainLayout>
```

---

## 10.9 UsersPage.jsx

–°—Ç—Ä–∞–Ω–∏—Ü–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ (—Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω).

### Tabs

```javascript
const [activeTab, setActiveTab] = useState(0); // 0 = –í—Å–µ, 1 = –ù–∞ –º–æ–¥–µ—Ä–∞—Ü–∏–∏
```

### State

```javascript
const [users, setUsers] = useState([]);
const [searchQuery, setSearchQuery] = useState('');
const [selectedUser, setSelectedUser] = useState(null);
const [dialogType, setDialogType] = useState(null); // 'approve' | 'reject' | 'changeRole' | 'delete'
const [loading, setLoading] = useState(true);
const [actionLoading, setActionLoading] = useState(false);
```

### Real-time –ø–æ–¥–ø–∏—Å–∫–∞

```javascript
useEffect(() => {
  const unsubscribe = userService.subscribeToUsers((usersData) => {
    setUsers(usersData);
    setLoading(false);
  });
  
  return () => unsubscribe();
}, []);
```

### –ú–æ–¥–µ—Ä–∞—Ü–∏—è

```javascript
const handleApprove = async (userId) => {
  setActionLoading(true);
  await userService.approveUser(userId, user.uid);
  setActionLoading(false);
  setDialogType(null);
};

const handleReject = async (userId) => {
  if (window.confirm('–û—Ç–∫–ª–æ–Ω–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è? –≠—Ç–æ —É–¥–∞–ª–∏—Ç –µ–≥–æ –∏–∑ —Å–∏—Å—Ç–µ–º—ã.')) {
    setActionLoading(true);
    await userService.rejectUser(userId);
    setActionLoading(false);
    setDialogType(null);
  }
};
```

### Render

```javascript
<MainLayout title="–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏">
  <Tabs value={activeTab} onChange={(e, v) => setActiveTab(v)}>
    <Tab label={`–í—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ (${users.length})`} />
    <Tab label={
      <Badge badgeContent={users.filter(u => u.role === 'pending').length} color="error">
        –ù–∞ –º–æ–¥–µ—Ä–∞—Ü–∏–∏
      </Badge>
    } />
  </Tabs>
  
  <TextField
    fullWidth
    placeholder="–ü–æ–∏—Å–∫..."
    value={searchQuery}
    onChange={(e) => setSearchQuery(e.target.value)}
  />
  
  <TableContainer>
    <Table>
      <TableHead>
        <TableRow>
          <TableCell>–ê–≤–∞—Ç–∞—Ä</TableCell>
          <TableCell>–§–ò–û</TableCell>
          <TableCell>Email</TableCell>
          <TableCell>–î–æ–ª–∂–Ω–æ—Å—Ç—å</TableCell>
          <TableCell>–†–æ–ª—å</TableCell>
          <TableCell>–î–∞—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏</TableCell>
          <TableCell>–î–µ–π—Å—Ç–≤–∏—è</TableCell>
        </TableRow>
      </TableHead>
      <TableBody>
        {filteredUsers.map(user => (
          <TableRow key={user.id}>
            <TableCell>
              <Avatar src={getAvatarSrc(user)} />
            </TableCell>
            <TableCell>
              {user.firstName} {user.lastName}
            </TableCell>
            <TableCell>{user.email}</TableCell>
            <TableCell>{user.position}</TableCell>
            <TableCell>
              <Chip
                label={getRoleLabel(user.role)}
                color={getRoleColor(user.role)}
              />
            </TableCell>
            <TableCell>
              {format(user.createdAt.toDate(), 'd MMM yyyy', { locale: ru })}
            </TableCell>
            <TableCell>
              {user.role === 'pending' ? (
                <>
                  <IconButton
                    color="success"
                    onClick={() => handleApprove(user.id)}
                    disabled={actionLoading}
                  >
                    <Check />
                  </IconButton>
                  <IconButton
                    color="error"
                    onClick={() => handleReject(user.id)}
                    disabled={actionLoading}
                  >
                    <Close />
                  </IconButton>
                </>
              ) : (
                <IconButton onClick={(e) => handleMenuOpen(e, user)}>
                  <MoreVert />
                </IconButton>
              )}
            </TableCell>
          </TableRow>
        ))}
      </TableBody>
    </Table>
  </TableContainer>
</MainLayout>
```

---

## 10.10 SettingsPage.jsx

–°—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫.

### Settings State

```javascript
const [settings, setSettings] = useState({
  emailNotifications: {
    newTasks: true,
    comments: true,
    deadlines: true
  },
  interface: {
    darkMode: false,
    showTooltips: true
  }
});
```

### –ó–∞–≥—Ä—É–∑–∫–∞ –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ

```javascript
useEffect(() => {
  loadSettings();
}, [user]);

const loadSettings = async () => {
  const docRef = doc(db, 'userSettings', user.uid);
  const docSnap = await getDoc(docRef);
  
  if (docSnap.exists()) {
    setSettings(docSnap.data());
  }
};

const handleSave = async () => {
  const docRef = doc(db, 'userSettings', user.uid);
  await setDoc(docRef, settings);
  alert('–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã');
};
```

### Render

```javascript
<MainLayout title="–ù–∞—Å—Ç—Ä–æ–π–∫–∏">
  <Card>
    <CardContent>
      <Typography variant="h6">Email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</Typography>
      
      <FormControlLabel
        control={
          <Switch
            checked={settings.emailNotifications.newTasks}
            onChange={(e) => setSettings({
              ...settings,
              emailNotifications: {
                ...settings.emailNotifications,
                newTasks: e.target.checked
              }
            })}
          />
        }
        label="–ù–æ–≤—ã–µ –∑–∞–¥–∞—á–∏"
      />
      
      <FormControlLabel
        control={
          <Switch
            checked={settings.emailNotifications.comments}
            onChange={(e) => setSettings({
              ...settings,
              emailNotifications: {
                ...settings.emailNotifications,
                comments: e.target.checked
              }
            })}
          />
        }
        label="–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏"
      />
      
      <FormControlLabel
        control={
          <Switch
            checked={settings.emailNotifications.deadlines}
            onChange={(e) => setSettings({
              ...settings,
              emailNotifications: {
                ...settings.emailNotifications,
                deadlines: e.target.checked
              }
            })}
          />
        }
        label="–î–µ–¥–ª–∞–π–Ω—ã"
      />
    </CardContent>
  </Card>
  
  <Card sx={{ mt: 2 }}>
    <CardContent>
      <Typography variant="h6">–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å</Typography>
      
      <FormControlLabel
        control={
          <Switch
            checked={settings.interface.darkMode}
            onChange={(e) => setSettings({
              ...settings,
              interface: {
                ...settings.interface,
                darkMode: e.target.checked
              }
            })}
          />
        }
        label="–¢—ë–º–Ω–∞—è —Ç–µ–º–∞"
      />
      
      <FormControlLabel
        control={
          <Switch
            checked={settings.interface.showTooltips}
            onChange={(e) => setSettings({
              ...settings,
              interface: {
                ...settings.interface,
                showTooltips: e.target.checked
              }
            })}
          />
        }
        label="–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø–æ–¥—Å–∫–∞–∑–∫–∏"
      />
    </CardContent>
  </Card>
  
  <Button
    variant="contained"
    onClick={handleSave}
    sx={{ mt: 2 }}
  >
    –°–æ—Ö—Ä–∞–Ω–∏—Ç—å
  </Button>
</MainLayout>
```

---

## 10.11 ProfilePage.jsx

–°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø—Ä–æ—Ñ–∏–ª—è.

### State

```javascript
const [isEditing, setIsEditing] = useState(false);
const [avatarSelectorOpen, setAvatarSelectorOpen] = useState(false);
const [editData, setEditData] = useState({
  firstName: user?.firstName || '',
  middleName: user?.middleName || '',
  lastName: user?.lastName || '',
  position: user?.position || '',
  responsibility: user?.responsibility || '',
  contacts: user?.contacts || {
    whatsapp: '',
    telegram: '',
    phone: ''
  }
});
```

### –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ

```javascript
const handleSave = async () => {
  await userService.updateUserData(user.uid, editData);
  
  setUser({
    ...user,
    ...editData
  });
  
  setIsEditing(false);
};
```

### –ê–≤–∞—Ç–∞—Ä

```javascript
const handleAvatarSelect = async (avatar) => {
  await userService.updateAvatar(user.uid, avatar);
  setUser({
    ...user,
    avatar
  });
};
```

### Render

```javascript
<MainLayout title="–ü—Ä–æ—Ñ–∏–ª—å">
  <Card>
    <CardContent>
      <Box sx={{ display: 'flex', alignItems: 'center', gap: 3 }}>
        <Box sx={{ position: 'relative' }}>
          <Avatar
            src={getAvatarSrc()}
            sx={{ width: 80, height: 80 }}
          />
          <IconButton
            sx={{
              position: 'absolute',
              bottom: -5,
              right: -5,
              bgcolor: 'primary.main',
              color: 'white'
            }}
            size="small"
            onClick={() => setAvatarSelectorOpen(true)}
          >
            <PhotoCamera />
          </IconButton>
        </Box>
        
        {isEditing ? (
          <Grid container spacing={2}>
            <Grid item xs={4}>
              <TextField
                label="–ò–º—è"
                value={editData.firstName}
                onChange={(e) => setEditData({
                  ...editData,
                  firstName: e.target.value
                })}
              />
            </Grid>
            {/* ... */}
          </Grid>
        ) : (
          <Box>
            <Typography variant="h5">
              {user.firstName} {user.middleName} {user.lastName}
            </Typography>
            <Typography variant="body2">
              {user.position}
            </Typography>
          </Box>
        )}
        
        <Box sx={{ ml: 'auto' }}>
          {isEditing ? (
            <>
              <Button onClick={() => setIsEditing(false)}>
                –û—Ç–º–µ–Ω–∞
              </Button>
              <Button variant="contained" onClick={handleSave}>
                –°–æ—Ö—Ä–∞–Ω–∏—Ç—å
              </Button>
            </>
          ) : (
            <Button
              variant="outlined"
              startIcon={<Edit />}
              onClick={() => setIsEditing(true)}
            >
              –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
            </Button>
          )}
        </Box>
      </Box>
      
      <Divider sx={{ my: 2 }} />
      
      {/* –ö–æ–Ω—Ç–∞–∫—Ç—ã, –¥–æ–ª–∂–Ω–æ—Å—Ç—å –∏ —Ç.–¥. */}
    </CardContent>
  </Card>
  
  <AvatarSelector
    open={avatarSelectorOpen}
    onClose={() => setAvatarSelectorOpen(false)}
    onSelect={handleAvatarSelect}
    currentAvatar={user?.avatar}
    firstName={user?.firstName}
    lastName={user?.lastName}
  />
</MainLayout>
```

---

## 10.12 PendingApprovalPage.jsx

–°—Ç—Ä–∞–Ω–∏—Ü–∞ –æ–∂–∏–¥–∞–Ω–∏—è –æ–¥–æ–±—Ä–µ–Ω–∏—è.

### –ü—Ä–æ—Å—Ç–æ–π UI

```javascript
<Box sx={{ maxWidth: 600, mx: 'auto', mt: 8, textAlign: 'center' }}>
  <HourglassEmpty sx={{ fontSize: 80, color: 'text.secondary', mb: 2 }} />
  
  <Typography variant="h4" gutterBottom>
    –û–∂–∏–¥–∞–Ω–∏–µ –æ–¥–æ–±—Ä–µ–Ω–∏—è
  </Typography>
  
  <Typography variant="body1" color="text.secondary" paragraph>
    –í–∞—à–∞ —É—á—ë—Ç–Ω–∞—è –∑–∞–ø–∏—Å—å –æ–∂–∏–¥–∞–µ—Ç –æ–¥–æ–±—Ä–µ–Ω–∏—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º.
    –í—ã –ø–æ–ª—É—á–∏—Ç–µ email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∫–æ–≥–¥–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –æ–¥–æ–±—Ä–∏—Ç –≤–∞—à—É –∑–∞—è–≤–∫—É.
  </Typography>
  
  <Typography variant="body2" color="text.secondary">
    Email: {user.email}
  </Typography>
  
  <Button
    variant="outlined"
    onClick={() => authService.logout()}
    sx={{ mt: 3 }}
  >
    –í—ã–π—Ç–∏
  </Button>
</Box>
```

---

# 11. –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è (Routing)

## App.jsx - –ü–æ–ª–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

```javascript
import React, { useState, useEffect, createContext } from 'react';
import { BrowserRouter as Router, Routes, Route, Navigate } from 'react-router-dom';
import { ThemeProvider } from '@mui/material/styles';
import { CssBaseline, Box, CircularProgress } from '@mui/material';
import theme from './theme';
import authService from './services/auth.service';

// Pages
import LoginPage from './pages/LoginPage';
import RegisterPage from './pages/RegisterPage';
import DashboardPage from './pages/DashboardPage';
import BoardPage from './pages/BoardPage';
import CalendarPage from './pages/CalendarPage';
import MyTasksPage from './pages/MyTasksPage';
import TeamPage from './pages/TeamPage';
import SketchesPage from './pages/SketchesPage';
import UsersPage from './pages/UsersPage';
import SettingsPage from './pages/SettingsPage';
import ProfilePage from './pages/ProfilePage';
import PendingApprovalPage from './pages/PendingApprovalPage';

const UserContext = createContext();

function ProtectedRoute({ children }) {
  const { user, loading } = React.useContext(UserContext);

  if (loading) {
    return (
      <Box sx={{ display: 'flex', justifyContent: 'center', alignItems: 'center', height: '100vh' }}>
        <CircularProgress />
      </Box>
    );
  }

  if (!user) {
    return <Navigate to="/login" replace />;
  }

  if (user.role === 'pending') {
    return <Navigate to="/pending" replace />;
  }

  return children;
}

function App() {
  const [user, setUser] = useState(null);
  const [loading, setLoading] = useState(true);

  useEffect(() => {
    const unsubscribe = authService.onAuthStateChanged((currentUser) => {
      setUser(currentUser);
      setLoading(false);
    });

    return () => unsubscribe();
  }, []);

  return (
    <ThemeProvider theme={theme}>
      <CssBaseline />
      <UserContext.Provider value={{ user, setUser, loading }}>
        <Router>
          <Routes>
            {/* Public routes */}
            <Route path="/login" element={<LoginPage />} />
            <Route path="/register" element={<RegisterPage />} />
            <Route path="/pending" element={<PendingApprovalPage />} />
            
            {/* Protected routes */}
            <Route path="/" element={<ProtectedRoute><DashboardPage /></ProtectedRoute>} />
            <Route path="/board/:boardId" element={<ProtectedRoute><BoardPage /></ProtectedRoute>} />
            <Route path="/calendar" element={<ProtectedRoute><CalendarPage /></ProtectedRoute>} />
            <Route path="/my-tasks" element={<ProtectedRoute><MyTasksPage /></ProtectedRoute>} />
            <Route path="/team" element={<ProtectedRoute><TeamPage /></ProtectedRoute>} />
            <Route path="/sketches" element={<ProtectedRoute><SketchesPage /></ProtectedRoute>} />
            <Route path="/users" element={<ProtectedRoute><UsersPage /></ProtectedRoute>} />
            <Route path="/settings" element={<ProtectedRoute><SettingsPage /></ProtectedRoute>} />
            <Route path="/profile" element={<ProtectedRoute><ProfilePage /></ProtectedRoute>} />
          </Routes>
        </Router>
      </UserContext.Provider>
    </ThemeProvider>
  );
}

export { UserContext };
export default App;
```

## –¢–∏–ø—ã –º–∞—Ä—à—Ä—É—Ç–æ–≤

### Public Routes
–î–æ—Å—Ç—É–ø–Ω—ã –±–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏:
- `/login` - –í—Ö–æ–¥
- `/register` - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è

### Semi-Protected Routes
–¢—Ä–µ–±—É—é—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏, –Ω–æ –Ω–µ –æ–¥–æ–±—Ä–µ–Ω–∏—è:
- `/pending` - –û–∂–∏–¥–∞–Ω–∏–µ –æ–¥–æ–±—Ä–µ–Ω–∏—è

### Protected Routes
–¢—Ä–µ–±—É—é—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –ò –æ–¥–æ–±—Ä–µ–Ω–∏—è (role !== 'pending'):
- `/` - –ì–ª–∞–≤–Ω–∞—è
- `/board/:boardId` - –î–æ—Å–∫–∞
- `/calendar` - –ö–∞–ª–µ–Ω–¥–∞—Ä—å
- `/my-tasks` - –ú–æ–∏ –∑–∞–¥–∞—á–∏
- `/team` - –ö–æ–º–∞–Ω–¥–∞
- `/sketches` - –ù–∞–±—Ä–æ—Å–∫–∏
- `/settings` - –ù–∞—Å—Ç—Ä–æ–π–∫–∏
- `/profile` - –ü—Ä–æ—Ñ–∏–ª—å

### Admin Routes
–¢—Ä–µ–±—É—é—Ç —Ä–æ–ª–∏ `admin`:
- `/users` - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏

---

# 12. –°–∏—Å—Ç–µ–º–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞

## –†–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### pending
- **–û–ø–∏—Å–∞–Ω–∏–µ**: –ù–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å, –æ–∂–∏–¥–∞—é—â–∏–π –æ–¥–æ–±—Ä–µ–Ω–∏—è
- **–î–æ—Å—Ç—É–ø**: –¢–æ–ª—å–∫–æ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ `/pending`
- **–î–µ–π—Å—Ç–≤–∏—è**: –ù–µ—Ç

### user
- **–û–ø–∏—Å–∞–Ω–∏–µ**: –û–±—ã—á–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
- **–î–æ—Å—Ç—É–ø**: –í—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- **–î–µ–π—Å—Ç–≤–∏—è**:
  - –°–æ–∑–¥–∞–≤–∞—Ç—å –¥–æ—Å–∫–∏
  - –°–æ–∑–¥–∞–≤–∞—Ç—å –∑–∞–¥–∞—á–∏
  - –°–æ–∑–¥–∞–≤–∞—Ç—å –∫–æ–º–∞–Ω–¥—ã (–¥–æ –ª–∏–º–∏—Ç–∞)
  - –°–æ–∑–¥–∞–≤–∞—Ç—å –Ω–∞–±—Ä–æ—Å–∫–∏
  - –ö–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å
  - –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–≤–æ–π –ø—Ä–æ—Ñ–∏–ª—å

### admin
- **–û–ø–∏—Å–∞–Ω–∏–µ**: –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä
- **–î–æ—Å—Ç—É–ø**: –í—Å–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –≤–∫–ª—é—á–∞—è `/users`
- **–î–µ–π—Å—Ç–≤–∏—è**:
  - –í—Å—ë —á—Ç–æ –º–æ–∂–µ—Ç `user`
  - –û–¥–æ–±—Ä—è—Ç—å/–æ—Ç–∫–ª–æ–Ω—è—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
  - –ò–∑–º–µ–Ω—è—Ç—å —Ä–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
  - –£–¥–∞–ª—è—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
  - –ò–∑–º–µ–Ω—è—Ç—å –ª–∏–º–∏—Ç –∫–æ–º–∞–Ω–¥
  - –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª–∏ –¥—Ä—É–≥–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

## –†–æ–ª–∏ –Ω–∞ –¥–æ—Å–∫–∞—Ö

### owner
- **–û–ø–∏—Å–∞–Ω–∏–µ**: –í–ª–∞–¥–µ–ª–µ—Ü –¥–æ—Å–∫–∏
- **–î–µ–π—Å—Ç–≤–∏—è**:
  - –í—Å—ë —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ—Å–∫–æ–π
  - –î–æ–±–∞–≤–ª—è—Ç—å/—É–¥–∞–ª—è—Ç—å —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
  - –ò–∑–º–µ–Ω—è—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∞–≤
  - –£–¥–∞–ª–∏—Ç—å –¥–æ—Å–∫—É

### editor
- **–û–ø–∏—Å–∞–Ω–∏–µ**: –†–µ–¥–∞–∫—Ç–æ—Ä
- **–î–µ–π—Å—Ç–≤–∏—è**:
  - –°–æ–∑–¥–∞–≤–∞—Ç—å –∑–∞–¥–∞—á–∏
  - –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ª—é–±—ã–µ –∑–∞–¥–∞—á–∏
  - –ü–µ—Ä–µ–º–µ—â–∞—Ç—å –∑–∞–¥–∞—á–∏ (–µ—Å–ª–∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–æ –≤ `whoCanMoveToStatus`)
  - –ö–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å

### viewer
- **–û–ø–∏—Å–∞–Ω–∏–µ**: –ù–∞–±–ª—é–¥–∞—Ç–µ–ª—å
- **–î–µ–π—Å—Ç–≤–∏—è**:
  - –¢–æ–ª—å–∫–æ –ø—Ä–æ—Å–º–æ—Ç—Ä
  - –ö–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å

## –†–æ–ª–∏ –≤ –∫–æ–º–∞–Ω–¥–µ

### leader
- **–û–ø–∏—Å–∞–Ω–∏–µ**: –õ–∏–¥–µ—Ä –∫–æ–º–∞–Ω–¥—ã
- **–î–µ–π—Å—Ç–≤–∏—è**:
  - –ü—Ä–∏–≥–ª–∞—à–∞—Ç—å —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
  - –£–¥–∞–ª—è—Ç—å —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
  - –£–¥–∞–ª–∏—Ç—å –∫–æ–º–∞–Ω–¥—É
  - –í—Å—ë —á—Ç–æ –º–æ–∂–µ—Ç `member`

### member
- **–û–ø–∏—Å–∞–Ω–∏–µ**: –£—á–∞—Å—Ç–Ω–∏–∫
- **–î–µ–π—Å—Ç–≤–∏—è**:
  - –ü—Ä–æ—Å–º–æ—Ç—Ä –∫–æ–º–∞–Ω–¥—ã
  - –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ —á–∞—Ç
  - –í—ã—Ö–æ–¥ –∏–∑ –∫–æ–º–∞–Ω–¥—ã

## –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –≤ –∫–æ–¥–µ

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

```javascript
// –í –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ
const { user } = useContext(UserContext);

if (user.role === 'admin') {
  // –ü–æ–∫–∞–∑–∞—Ç—å –∞–¥–º–∏–Ω—Å–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏
}
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–æ–ª–∏ –Ω–∞ –¥–æ—Å–∫–µ

```javascript
const canEditBoard = (board) => {
  return board.members[user.uid] === 'owner' || 
         board.members[user.uid] === 'editor';
};

const canDeleteBoard = (board) => {
  return board.members[user.uid] === 'owner';
};
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è

```javascript
const canMoveToColumn = (board, columnId) => {
  const userRole = board.members[user.uid];
  const allowedRoles = board.settings?.whoCanMoveToStatus?.[columnId] || ['owner', 'editor'];
  
  return allowedRoles.includes(userRole);
};
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ Firestore Rules

```javascript
// –ü—Ä–∏–º–µ—Ä –ø—Ä–∞–≤–∏–ª–∞
match /boards/{boardId} {
  allow read: if isSignedIn() && (
    resource.data.ownerId == request.auth.uid ||
    resource.data.members[request.auth.uid] != null
  );
  
  allow update: if isSignedIn() && (
    resource.data.ownerId == request.auth.uid ||
    resource.data.members[request.auth.uid] in ['owner', 'editor']
  );
}
```

---

# 13. –°—Ç–∏–ª–∏–∑–∞—Ü–∏—è –∏ —Ç–µ–º–∞

## theme.js

```javascript
import { createTheme } from '@mui/material/styles';

const theme = createTheme({
  palette: {
    mode: 'light',
    primary: {
      main: '#1976d2',
      light: '#42a5f5',
      dark: '#1565c0',
      contrastText: '#fff',
    },
    secondary: {
      main: '#9c27b0',
      light: '#ba68c8',
      dark: '#7b1fa2',
      contrastText: '#fff',
    },
    error: {
      main: '#d32f2f',
    },
    warning: {
      main: '#ed6c02',
    },
    info: {
      main: '#0288d1',
    },
    success: {
      main: '#2e7d32',
    },
    background: {
      default: '#f5f5f5',
      paper: '#ffffff',
    },
  },
  typography: {
    fontFamily: [
      '-apple-system',
      'BlinkMacSystemFont',
      '"Segoe UI"',
      'Roboto',
      '"Helvetica Neue"',
      'Arial',
      'sans-serif',
    ].join(','),
    h1: {
      fontSize: '2.5rem',
      fontWeight: 600,
    },
    h2: {
      fontSize: '2rem',
      fontWeight: 600,
    },
    h3: {
      fontSize: '1.75rem',
      fontWeight: 600,
    },
    h4: {
      fontSize: '1.5rem',
      fontWeight: 600,
    },
    h5: {
      fontSize: '1.25rem',
      fontWeight: 600,
    },
    h6: {
      fontSize: '1rem',
      fontWeight: 600,
    },
  },
  shape: {
    borderRadius: 8,
  },
  components: {
    MuiButton: {
      styleOverrides: {
        root: {
          textTransform: 'none',
          fontWeight: 500,
        },
      },
    },
    MuiCard: {
      styleOverrides: {
        root: {
          boxShadow: '0 1px 3px rgba(0,0,0,0.12)',
        },
      },
    },
  },
});

export default theme;
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ç–µ–º—ã

```javascript
// –í main.jsx
import { ThemeProvider } from '@mui/material/styles';
import theme from './theme';

ReactDOM.createRoot(document.getElementById('root')).render(
  <ThemeProvider theme={theme}>
    <CssBaseline />
    <App />
  </ThemeProvider>
);
```

## –ö–∞—Å—Ç–æ–º–Ω—ã–µ —Å—Ç–∏–ª–∏

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ sx prop

```javascript
<Box
  sx={{
    display: 'flex',
    flexDirection: 'column',
    gap: 2,
    p: 3,
    bgcolor: 'background.paper',
    borderRadius: 2,
    boxShadow: 1,
  }}
>
  {/* Content */}
</Box>
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ theme

```javascript
import { useTheme } from '@mui/material/styles';

function MyComponent() {
  const theme = useTheme();
  
  return (
    <Box sx={{ color: theme.palette.primary.main }}>
      Colored text
    </Box>
  );
}
```

## –ü–∞–ª–∏—Ç—Ä–∞ —Ü–≤–µ—Ç–æ–≤

```javascript
// Primary
theme.palette.primary.main      // #1976d2
theme.palette.primary.light     // #42a5f5
theme.palette.primary.dark      // #1565c0

// Secondary
theme.palette.secondary.main    // #9c27b0

// Status colors
theme.palette.error.main        // #d32f2f
theme.palette.warning.main      // #ed6c02
theme.palette.info.main         // #0288d1
theme.palette.success.main      // #2e7d32

// Background
theme.palette.background.default // #f5f5f5
theme.palette.background.paper   // #ffffff

// Text
theme.palette.text.primary       // rgba(0, 0, 0, 0.87)
theme.palette.text.secondary     // rgba(0, 0, 0, 0.6)
```

---

# 14. –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é

## Development

### –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫

```bash
cd frontend
npm install
npm run dev
```

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –æ—Ç–∫—Ä–æ–µ—Ç—Å—è –Ω–∞ http://localhost:5173

### –°–±–æ—Ä–∫–∞ –¥–ª—è production

```bash
npm run build
```

–†–µ–∑—É–ª—å—Ç–∞—Ç –≤ –ø–∞–ø–∫–µ `dist/`

## Firebase Hosting

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Firebase CLI

```bash
npm install -g firebase-tools
```

### 2. –õ–æ–≥–∏–Ω –≤ Firebase

```bash
firebase login
```

### 3. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞

```bash
firebase init hosting
```

–í—ã–±–µ—Ä–∏:
- Public directory: `dist`
- Configure as SPA: `Yes`
- Set up automatic builds: `No`

### 4. –î–µ–ø–ª–æ–π

```bash
npm run build
firebase deploy --only hosting
```

### firebase.json

```json
{
  "hosting": {
    "public": "dist",
    "ignore": [
      "firebase.json",
      "**/.*",
      "**/node_modules/**"
    ],
    "rewrites": [
      {
        "source": "**",
        "destination": "/index.html"
      }
    ],
    "headers": [
      {
        "source": "**/*.@(jpg|jpeg|gif|png|svg|webp)",
        "headers": [
          {
            "key": "Cache-Control",
            "value": "max-age=31536000"
          }
        ]
      },
      {
        "source": "**/*.@(js|css)",
        "headers": [
          {
            "key": "Cache-Control",
            "value": "max-age=31536000"
          }
        ]
      }
    ]
  }
}
```

## Environment Variables

### Development (.env.development)

```
VITE_FIREBASE_API_KEY=AIzaSyAngTFq2DEJla-q7823XvSfVL2CVOye7Jg
VITE_FIREBASE_AUTH_DOMAIN=agile-mind-pro.firebaseapp.com
VITE_FIREBASE_PROJECT_ID=agile-mind-pro
VITE_FIREBASE_STORAGE_BUCKET=agile-mind-pro.firebasestorage.app
VITE_GEMINI_API_KEY=AIzaSyB8zF91xZeGD4vz92T6_0dEilbrmQieiJs
```

### Production (.env.production)

–¢–µ –∂–µ –∑–Ω–∞—á–µ–Ω–∏—è, –Ω–æ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥—Ä—É–≥–∏–µ –∫–ª—é—á–∏ –¥–ª—è production.

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –∫–æ–¥–µ

```javascript
const apiKey = import.meta.env.VITE_FIREBASE_API_KEY;
```

---

# 15. Troubleshooting

## –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

### 1. Permission Denied –≤ Firestore

**–ü—Ä–æ–±–ª–µ–º–∞:**
```
FirebaseError: [code=permission-denied]: Missing or insufficient permissions
```

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å Firestore Rules –≤ Firebase Console
2. –£–±–µ–¥–∏—Å—å —á—Ç–æ –ø—Ä–∞–≤–∏–ª–∞ –æ–±–Ω–æ–≤–ª–µ–Ω—ã (—Å–º. —Ä–∞–∑–¥–µ–ª "Firestore Rules")
3. –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω (`user !== null`)
4. –ü—Ä–æ–≤–µ—Ä—å —Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (`role !== 'pending'`)

### 2. –ë–µ–ª—ã–π —ç–∫—Ä–∞–Ω –ø–æ—Å–ª–µ —Å–±–æ—Ä–∫–∏

**–ü—Ä–æ–±–ª–µ–º–∞:**
–ü–æ—Å–ª–µ `npm run build` –∏ –¥–µ–ø–ª–æ—è - –±–µ–ª—ã–π —ç–∫—Ä–∞–Ω.

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å `firebase.json` - –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å rewrite –Ω–∞ `/index.html`
2. –ü—Ä–æ–≤–µ—Ä—å –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ –Ω–∞ –æ—à–∏–±–∫–∏
3. –£–±–µ–¥–∏—Å—å —á—Ç–æ `public` –≤ `firebase.json` —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ `dist`

### 3. CORS –æ—à–∏–±–∫–∏ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Ñ–∞–π–ª–æ–≤

**–ü—Ä–æ–±–ª–µ–º–∞:**
```
Access to fetch at 'https://...' has been blocked by CORS policy
```

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å Storage Rules –≤ Firebase Console
2. –î–æ–±–∞–≤—å –ø—Ä–∞–≤–∏–ª–æ –¥–ª—è CORS:

```javascript
// Storage Rules
match /{allPaths=**} {
  allow read: if true;
  allow write: if request.auth != null;
}
```

### 4. –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç drag & drop

**–ü—Ä–æ–±–ª–µ–º–∞:**
–ó–∞–¥–∞—á–∏ –Ω–µ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞—é—Ç—Å—è –Ω–∞ –¥–æ—Å–∫–µ.

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ `@dnd-kit` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
2. –ü—Ä–æ–≤–µ—Ä—å `sensors` –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ:

```javascript
const sensors = useSensors(
  useSensor(PointerSensor, {
    activationConstraint: { distance: 8 }
  })
);
```

3. –ü—Ä–æ–≤–µ—Ä—å –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–æ—Å–∫–µ

### 5. –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –Ω–µ –ø—Ä–∏—Ö–æ–¥—è—Ç

**–ü—Ä–æ–±–ª–µ–º–∞:**
–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –Ω–µ —Å–æ–∑–¥–∞—é—Ç—Å—è –∏–ª–∏ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è.

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ `notificationService.create()` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è
2. –ü—Ä–æ–≤–µ—Ä—å –∫–æ–Ω—Å–æ–ª—å –Ω–∞ –æ—à–∏–±–∫–∏
3. –ü—Ä–æ–≤–µ—Ä—å Firestore Rules –¥–ª—è –∫–æ–ª–ª–µ–∫—Ü–∏–∏ `notifications`
4. –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ `NotificationCenter` –ø–æ–¥–ø–∏—Å–∞–Ω –Ω–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è:

```javascript
useEffect(() => {
  const unsubscribe = notificationService.subscribeToUserNotifications(
    user.uid,
    (notifications) => {
      setNotifications(notifications);
    }
  );
  
  return () => unsubscribe();
}, [user.uid]);
```

### 6. AI –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç

**–ü—Ä–æ–±–ª–µ–º–∞:**
AI –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã.

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å API –∫–ª—é—á Gemini
2. –ü—Ä–æ–≤–µ—Ä—å –∫–æ–Ω—Å–æ–ª—å –Ω–∞ –æ—à–∏–±–∫–∏
3. –ü—Ä–æ–≤–µ—Ä—å –∫–≤–æ—Ç—É API –≤ Google Cloud Console
4. –ü—Ä–æ–≤–µ—Ä—å —Ñ–æ—Ä–º–∞—Ç –ø—Ä–æ–º–ø—Ç–∞

### 7. –ê–≤–∞—Ç–∞—Ä—ã –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è

**–ü—Ä–æ–±–ª–µ–º–∞:**
–í–º–µ—Å—Ç–æ –∞–≤–∞—Ç–∞—Ä–æ–≤ - –∏–∫–æ–Ω–∫–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é.

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ –ø–∞–ø–∫–∞ `public/avatars` —Å–æ–¥–µ—Ä–∂–∏—Ç 25 SVG —Ñ–∞–π–ª–æ–≤
2. –ü—Ä–æ–≤–µ—Ä—å –ø—É—Ç—å –∫ –∞–≤–∞—Ç–∞—Ä–∞–º: `/avatars/avatar-1.svg`
3. –ü—Ä–æ–≤–µ—Ä—å —Ñ—É–Ω–∫—Ü–∏—é `getAvatarSrc()`:

```javascript
const getAvatarSrc = (userData) => {
  if (userData.avatar === 'generated' || !userData.avatar) {
    return generateLetterAvatar(userData.firstName, userData.lastName);
  }
  if (userData.avatar?.startsWith('default-')) {
    const num = userData.avatar.replace('default-', '');
    return `/avatars/avatar-${num}.svg`;
  }
  return userData.avatar;
};
```

### 8. DebugConsole –Ω–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è

**–ü—Ä–æ–±–ª–µ–º–∞:**
–ö–Ω–æ–ø–∫–∞ –æ—Ç–ª–∞–¥–∫–∏ –Ω–µ –≤–∏–¥–Ω–∞.

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å `MainLayout.jsx` - –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å `Fab` —Å `<BugReport />`
2. –ü—Ä–æ–≤–µ—Ä—å z-index –∫–Ω–æ–ø–∫–∏: `zIndex: 2000`
3. –ü—Ä–æ–≤–µ—Ä—å position: `position: 'fixed', bottom: 88, right: 24`

### 9. –ö–æ–º–∞–Ω–¥—ã –Ω–µ —Å–æ–∑–¥–∞—é—Ç—Å—è

**–ü—Ä–æ–±–ª–µ–º–∞:**
–ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∫–æ–º–∞–Ω–¥—ã - –Ω–∏—á–µ–≥–æ –Ω–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç.

**–†–µ—à–µ–Ω–∏–µ:**
1. –û—Ç–∫—Ä–æ–π –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12)
2. –ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏ `teamService`:
   ```
   üîµ [TeamService] Creating team: ...
   ‚úÖ [TeamService] Team created with ID: ...
   ```
3. –ï—Å–ª–∏ –≤–∏–¥–∏—à—å `permission-denied` - –æ–±–Ω–æ–≤–∏ Firestore Rules
4. –ü—Ä–æ–≤–µ—Ä—å `teamsCount` –∏ `teamLimit` –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### 10. Real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç

**–ü—Ä–æ–±–ª–µ–º–∞:**
–ò–∑–º–µ–Ω–µ–Ω–∏—è –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `onSnapshot` –∞ –Ω–µ `getDocs`
2. –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ `unsubscribe()` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –≤ `useEffect` cleanup:

```javascript
useEffect(() => {
  const unsubscribe = service.subscribe(...);
  
  return () => unsubscribe(); // –í–ê–ñ–ù–û!
}, [dependencies]);
```

3. –ü—Ä–æ–≤–µ—Ä—å dependencies –º–∞—Å—Å–∏–≤ –≤ `useEffect`

---

# 16. –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

## –ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É

### 1. –°–æ–∑–¥–∞–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—ã

```javascript
// src/pages/NewPage.jsx
import React from 'react';
import MainLayout from '../components/Layout/MainLayout';

function NewPage() {
  return (
    <MainLayout title="–ù–æ–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞">
      <div>–°–æ–¥–µ—Ä–∂–∏–º–æ–µ –Ω–æ–≤–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã</div>
    </MainLayout>
  );
}

export default NewPage;
```

### 2. –î–æ–±–∞–≤—å –º–∞—Ä—à—Ä—É—Ç –≤ App.jsx

```javascript
import NewPage from './pages/NewPage';

// –í Routes
<Route path="/new-page" element={<ProtectedRoute><NewPage /></ProtectedRoute>} />
```

### 3. –î–æ–±–∞–≤—å –ø—É–Ω–∫—Ç –º–µ–Ω—é –≤ Sidebar.jsx

```javascript
const menuItems = [
  // ...—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ
  { title: '–ù–æ–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞', icon: <NewIcon />, path: '/new-page' },
];
```

## –ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π —Å–µ—Ä–≤–∏—Å

### 1. –°–æ–∑–¥–∞–π —Ñ–∞–π–ª —Å–µ—Ä–≤–∏—Å–∞

```javascript
// src/services/new.service.js
import { collection, addDoc, getDocs } from 'firebase/firestore';
import { db } from '../config/firebase';

class NewService {
  async createItem(data) {
    try {
      const docRef = await addDoc(collection(db, 'newCollection'), data);
      return { success: true, id: docRef.id };
    } catch (error) {
      console.error('Error:', error);
      return { success: false, message: error.message };
    }
  }
  
  async getItems() {
    try {
      const snapshot = await getDocs(collection(db, 'newCollection'));
      const items = [];
      snapshot.forEach(doc => {
        items.push({ id: doc.id, ...doc.data() });
      });
      return { success: true, items };
    } catch (error) {
      console.error('Error:', error);
      return { success: false, message: error.message };
    }
  }
}

export default new NewService();
```

### 2. –ò—Å–ø–æ–ª—å–∑—É–π —Å–µ—Ä–≤–∏—Å –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ

```javascript
import newService from '../services/new.service';

function MyComponent() {
  const [items, setItems] = useState([]);
  
  useEffect(() => {
    loadItems();
  }, []);
  
  const loadItems = async () => {
    const result = await newService.getItems();
    if (result.success) {
      setItems(result.items);
    }
  };
  
  // ...
}
```

## –ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π —Ç–∏–ø —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

### 1. –î–æ–±–∞–≤—å —Ç–∏–ø –≤ notification.service.js

```javascript
const TYPES = {
  // ...—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ
  NEW_TYPE: 'new_type',
};
```

### 2. –°–æ–∑–¥–∞–π –º–µ—Ç–æ–¥ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏

```javascript
async notifyNewType(userId, data) {
  await this.create({
    type: this.TYPES.NEW_TYPE,
    userId,
    title: '–ó–∞–≥–æ–ª–æ–≤–æ–∫ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è',
    message: `–°–æ–æ–±—â–µ–Ω–∏–µ —Å ${data}`,
    link: '/target-page',
    actorId: currentUserId
  });
}
```

### 3. –î–æ–±–∞–≤—å –∏–∫–æ–Ω–∫—É –≤ NotificationCenter

```javascript
const getNotificationIcon = (type) => {
  switch (type) {
    // ...—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ
    case 'new_type': return <NewIcon />;
    default: return <Notifications />;
  }
};
```

## –ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤–æ–µ –ø–æ–ª–µ –≤ –∑–∞–¥–∞—á—É

### 1. –û–±–Ω–æ–≤–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –≤ task.service.js

```javascript
async createTask(boardId, taskData, userId) {
  const taskRef = await addDoc(collection(db, 'boards', boardId, 'tasks'), {
    // ...—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–æ–ª—è
    newField: taskData.newField || null, // –ù–û–í–û–ï –ü–û–õ–ï
    createdAt: serverTimestamp(),
  });
}
```

### 2. –û–±–Ω–æ–≤–∏ TaskModal.jsx

```javascript
// –î–æ–±–∞–≤—å –≤ —Ñ–æ—Ä–º—É
<TextField
  label="–ù–æ–≤–æ–µ –ø–æ–ª–µ"
  value={task.newField}
  onChange={(e) => handleUpdate('newField', e.target.value)}
/>
```

### 3. –û–±–Ω–æ–≤–∏ TaskCard.jsx (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

```javascript
{task.newField && (
  <Typography variant="caption">
    {task.newField}
  </Typography>
)}
```

## –ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é –∫–æ–ª–ª–µ–∫—Ü–∏—é –≤ Firestore

### 1. –û–±–Ω–æ–≤–∏ Firestore Rules

```javascript
match /newCollection/{docId} {
  allow read: if isSignedIn();
  allow create: if isApproved();
  allow update, delete: if isSignedIn();
}
```

### 2. –°–æ–∑–¥–∞–π —Å–µ—Ä–≤–∏—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∫–æ–ª–ª–µ–∫—Ü–∏–µ–π

```javascript
// src/services/newCollection.service.js
import { collection, addDoc, getDocs, onSnapshot } from 'firebase/firestore';
import { db } from '../config/firebase';

class NewCollectionService {
  async create(data) {
    const docRef = await addDoc(collection(db, 'newCollection'), {
      ...data,
      createdAt: serverTimestamp()
    });
    return { success: true, id: docRef.id };
  }
  
  subscribeToCollection(callback) {
    return onSnapshot(collection(db, 'newCollection'), (snapshot) => {
      const items = [];
      snapshot.forEach(doc => {
        items.push({ id: doc.id, ...doc.data() });
      });
      callback(items);
    });
  }
}

export default new NewCollectionService();
```

---

# üéâ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–≠—Ç–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ–∫—Ä—ã–≤–∞–µ—Ç –≤—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ –∞—Å–ø–µ–∫—Ç—ã –ø—Ä–æ–µ–∫—Ç–∞ Agile Mind Pro. –î–ª—è –±–æ–ª–µ–µ –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –ø–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º —Ç–µ–º–∞–º –æ–±—Ä–∞—â–∞–π—Ç–µ—Å—å –∫:

- **Firebase Documentation**: https://firebase.google.com/docs
- **React Documentation**: https://react.dev
- **Material-UI Documentation**: https://mui.com
- **@dnd-kit Documentation**: https://docs.dndkit.com
- **Google Generative AI**: https://ai.google.dev

## –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# Development
npm run dev              # –ó–∞–ø—É—Å–∫ dev —Å–µ—Ä–≤–µ—Ä–∞
npm run build            # –°–±–æ—Ä–∫–∞ –¥–ª—è production
npm run preview          # –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä production —Å–±–æ—Ä–∫–∏

# Firebase
firebase login           # –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
firebase init            # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞
firebase deploy          # –î–µ–ø–ª–æ–π –≤—Å–µ–≥–æ
firebase deploy --only hosting  # –î–µ–ø–ª–æ–π —Ç–æ–ª—å–∫–æ —Ö–æ—Å—Ç–∏–Ω–≥–∞

# Debugging
npm run dev -- --host    # –î–æ—Å—Ç—É–ø –∏–∑ –ª–æ–∫–∞–ª—å–Ω–æ–π —Å–µ—Ç–∏
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–º–∞–Ω–¥—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

- **Frontend Developer**: React, Material-UI, State management
- **Backend Developer**: Firebase, Firestore Rules, Cloud Functions
- **AI Developer**: Gemini integration, Prompt engineering
- **DevOps**: Firebase Hosting, CI/CD
- **QA**: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, Bug tracking

## Roadmap

### –§–∞–∑–∞ 1 (–¢–µ–∫—É—â–∞—è) ‚úÖ
- ‚úÖ –ë–∞–∑–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
- ‚úÖ –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- ‚úÖ Kanban –¥–æ—Å–∫–∏
- ‚úÖ –ó–∞–¥–∞—á–∏ —Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏
- ‚úÖ –ö–∞–ª–µ–Ω–¥–∞—Ä—å
- ‚úÖ –ö–æ–º–∞–Ω–¥—ã
- ‚úÖ –ù–∞–±—Ä–æ—Å–∫–∏
- ‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- ‚úÖ AI –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä

### –§–∞–∑–∞ 2 (–ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è)
- [ ] –ü—Ä–æ–µ–∫—Ç—ã (–ø–æ–ª–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è)
- [ ] –ß–∞—Ç –∫–æ–º–∞–Ω–¥—ã —Å —Ñ–∞–π–ª–∞–º–∏
- [ ] Email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (—á–µ—Ä–µ–∑ Cloud Functions)
- [ ] –ì—Ä–∞—Ñ–∏–∫–∏ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞
- [ ] –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ (Slack, Telegram)
- [ ] –ú–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

### –§–∞–∑–∞ 3 (–ë—É–¥—É—â–µ–µ)
- [ ] Time tracking
- [ ] Gantt charts
- [ ] –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è (–ø—Ä–∞–≤–∏–ª–∞, —Ç—Ä–∏–≥–≥–µ—Ä—ã)
- [ ] Custom fields
- [ ] API –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π
- [ ] White-label —Ä–µ—à–µ–Ω–∏–µ

---

**–í–µ—Ä—Å–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏**: 1.0  
**–î–∞—Ç–∞**: 30 –Ω–æ—è–±—Ä—è 2024  
**–ê–≤—Ç–æ—Ä**: AI Assistant  
**–ü—Ä–æ–µ–∫—Ç**: Agile Mind Pro