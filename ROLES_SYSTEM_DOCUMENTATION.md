# –°–∏—Å—Ç–µ–º–∞ —Ä–æ–ª–µ–π –∏ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞

**–î–∞—Ç–∞ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è:** 22.12.2025
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ê–∫—Ç–∏–≤–Ω–∞ –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç

---

## –û–±–∑–æ—Ä

Agile Mind Pro –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **–º–æ–¥—É–ª—å–Ω—É—é —Å–∏—Å—Ç–µ–º—É —Ä–æ–ª–µ–π** —Å –≥—Ä–∞–Ω—É–ª—è—Ä–Ω—ã–º–∏ –ø—Ä–∞–≤–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞. –ö–∞–∂–¥–∞—è —Ä–æ–ª—å –∏–º–µ–µ—Ç –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–π –¥–æ—Å—Ç—É–ø –∫ –º–æ–¥—É–ª—è–º —Å–∏—Å—Ç–µ–º—ã —Å 4 —É—Ä–æ–≤–Ω—è–º–∏ –ø—Ä–∞–≤.

### –£—Ä–æ–≤–Ω–∏ –¥–æ—Å—Ç—É–ø–∞

| –£—Ä–æ–≤–µ–Ω—å | –ö–æ–¥ | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|-----|----------|
| **–ù–µ—Ç –¥–æ—Å—Ç—É–ø–∞** | `none` | –ú–æ–¥—É–ª—å –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–∫—Ä—ã—Ç |
| **–ü—Ä–æ—Å–º–æ—Ç—Ä** | `view` | –¢–æ–ª—å–∫–æ —á—Ç–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö |
| **–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** | `edit` | –°–æ–∑–¥–∞–Ω–∏–µ –∏ –∏–∑–º–µ–Ω–µ–Ω–∏–µ |
| **–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ** | `admin` | –ü–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å + –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ |

---

## –°–∏—Å—Ç–µ–º–Ω—ã–µ —Ä–æ–ª–∏

### 1. üëë Admin (–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä)
- **ID:** `admin`
- **–°–∏—Å—Ç–µ–º–Ω–∞—è:** –î–∞ (–Ω–µ–ª—å–∑—è —É–¥–∞–ª–∏—Ç—å)
- **–î–æ—Å—Ç—É–ø:** –ü–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º –º–æ–¥—É–ª—è–º (admin)
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:** –ì–ª–∞–≤–Ω—ã–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä —Å–∏—Å—Ç–µ–º—ã

### 2. üìä Manager (–ú–µ–Ω–µ–¥–∂–µ—Ä)
- **ID:** `manager`
- **–°–∏—Å—Ç–µ–º–Ω–∞—è:** –î–∞
- **–î–æ—Å—Ç—É–ø:** Admin –Ω–∞ –ø—Ä–æ–µ–∫—Ç—ã, edit –Ω–∞ –æ—Å—Ç–∞–ª—å–Ω–æ–µ
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:** –†—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª–∏ –ø—Ä–æ–µ–∫—Ç–æ–≤

### 3. üíº Office (–û—Ñ–∏—Å–Ω—ã–π —Å–æ—Ç—Ä—É–¥–Ω–∏–∫)
- **ID:** `office`
- **–°–∏—Å—Ç–µ–º–Ω–∞—è:** –î–∞
- **–î–æ—Å—Ç—É–ø:** Edit –Ω–∞ –æ—Å–Ω–æ–≤–Ω—ã–µ –º–æ–¥—É–ª–∏, view –Ω–∞ –æ–±—É—á–µ–Ω–∏–µ
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:** –û—Å–Ω–æ–≤–Ω—ã–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ –∫–æ–º–ø–∞–Ω–∏–∏
- **–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é:** –î–∞ (–Ω–æ–≤—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –ø–æ–ª—É—á–∞—é—Ç —ç—Ç—É —Ä–æ–ª—å)

### 4. üéì Trainee (–°—Ç–∞–∂—ë—Ä)
- **ID:** `trainee`
- **–°–∏—Å—Ç–µ–º–Ω–∞—è:** –î–∞
- **–î–æ—Å—Ç—É–ø:** View –Ω–∞ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –º–æ–¥—É–ª–µ–π, edit –Ω–∞ –æ–±—É—á–µ–Ω–∏–µ
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:** –°—Ç–∞–∂—ë—Ä—ã, –Ω–æ–≤–∏—á–∫–∏

### 5. üëÅÔ∏è Viewer (–ù–∞–±–ª—é–¥–∞—Ç–µ–ª—å)
- **ID:** `viewer`
- **–°–∏—Å—Ç–µ–º–Ω–∞—è:** –î–∞
- **–î–æ—Å—Ç—É–ø:** –¢–æ–ª—å–∫–æ view –Ω–∞ –≤—Å–µ –º–æ–¥—É–ª–∏
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:** –ö–ª–∏–µ–Ω—Ç—ã, –ø–∞—Ä—Ç–Ω—ë—Ä—ã, –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª–∏

---

## –ú–æ–¥—É–ª–∏ —Å–∏—Å—Ç–µ–º—ã

| –ú–æ–¥—É–ª—å | ID | –û–ø–∏—Å–∞–Ω–∏–µ |
|--------|-----|----------|
| –ó–∞–¥–∞—á–∏ | `tasks` | –õ–∏—á–Ω—ã–µ –∑–∞–¥–∞—á–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |
| –î–æ—Å–∫–∏ | `boards` | Kanban –¥–æ—Å–∫–∏ —Å –∫–æ–ª–æ–Ω–∫–∞–º–∏ |
| –°–ø—Ä–∏–Ω—Ç—ã | `sprints` | Agile —Å–ø—Ä–∏–Ω—Ç—ã |
| –ö–∞–ª–µ–Ω–¥–∞—Ä—å | `calendar` | –°–æ–±—ã—Ç–∏—è –∏ –≤—Å—Ç—Ä–µ—á–∏ |
| –ù–∞–±—Ä–æ—Å–∫–∏ | `sketches` | –ë—ã—Å—Ç—Ä—ã–µ –∑–∞–º–µ—Ç–∫–∏ –∏ —ç—Å–∫–∏–∑—ã |
| –ö–æ–º–∞–Ω–¥—ã | `teams` | –†–∞–±–æ—á–∏–µ –≥—Ä—É–ø–ø—ã —Å —á–∞—Ç–æ–º |
| –ù–æ–≤–æ—Å—Ç–∏ | `news` | –ù–æ–≤–æ—Å—Ç–∏ –∫–æ–º–ø–∞–Ω–∏–∏ |
| –û–±—É—á–µ–Ω–∏–µ | `learning` | LMS —Å–∏—Å—Ç–µ–º–∞ (–∫—É—Ä—Å—ã, —É—Ä–æ–∫–∏, —ç–∫–∑–∞–º–µ–Ω—ã) |
| –ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π | `knowledge` | –°—Ç–∞—Ç—å–∏ –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è |
| –ß–∞—Ç | `chat` | –û–±—â–∏–π —á–∞—Ç (–±—É–¥—É—â–µ–µ) |
| –ü—Ä–æ—Ñ–∏–ª—å | `profile` | –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

### –ö–æ–ª–ª–µ–∫—Ü–∏—è `roles`

```javascript
{
  id: "office",                    // ID —Ä–æ–ª–∏
  name: "–û—Ñ–∏—Å–Ω—ã–π —Å–æ—Ç—Ä—É–¥–Ω–∏–∫",       // –ù–∞–∑–≤–∞–Ω–∏–µ
  description: "–û—Å–Ω–æ–≤–Ω–æ–π...",      // –û–ø–∏—Å–∞–Ω–∏–µ
  isSystem: true,                  // –°–∏—Å—Ç–µ–º–Ω–∞—è —Ä–æ–ª—å?
  isDefault: true,                 // –†–æ–ª—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é?
  usersCount: 15,                  // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
  modules: {                       // –ü—Ä–∞–≤–∞ –Ω–∞ –º–æ–¥—É–ª–∏
    tasks: "edit",
    boards: "edit",
    teams: "edit",
    learning: "view",
    // ...
  },
  createdAt: Timestamp,
  createdBy: "userId",
  updatedAt: Timestamp
}
```

### –ö–æ–ª–ª–µ–∫—Ü–∏—è `users`

```javascript
{
  uid: "user123",
  roleId: "office",               // ‚Üê –ù–æ–≤–æ–µ –ø–æ–ª–µ
  role: "member",                 // ‚Üê –°—Ç–∞—Ä–æ–µ –ø–æ–ª–µ (–¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏)
  firstName: "–ò–≤–∞–Ω",
  lastName: "–ò–≤–∞–Ω–æ–≤",
  // ... –¥—Ä—É–≥–∏–µ –ø–æ–ª—è
}
```

---

## API (roleService)

### –ü–æ–ª—É—á–µ–Ω–∏–µ —Ä–æ–ª–µ–π

```javascript
// –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ —Ä–æ–ª–∏
const { success, roles } = await roleService.getRoles();

// –ü–æ–ª—É—á–∏—Ç—å —Ä–æ–ª—å –ø–æ ID
const { success, role } = await roleService.getRole('office');

// –ü–æ–ª—É—á–∏—Ç—å —Ä–æ–ª—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
const { success, role } = await roleService.getDefaultRole();
```

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–æ–ª—è–º–∏

```javascript
// –°–æ–∑–¥–∞—Ç—å —Ä–æ–ª—å
const { success, roleId } = await roleService.createRole({
  name: "–ù–æ–≤–∞—è —Ä–æ–ª—å",
  description: "–û–ø–∏—Å–∞–Ω–∏–µ",
  isDefault: false,
  modules: {
    tasks: "view",
    boards: "edit"
  }
}, userId);

// –û–±–Ω–æ–≤–∏—Ç—å —Ä–æ–ª—å
await roleService.updateRole(roleId, {
  name: "–û–±–Ω–æ–≤–ª—ë–Ω–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ",
  modules: { tasks: "admin" }
});

// –£–¥–∞–ª–∏—Ç—å —Ä–æ–ª—å (—Ç–æ–ª—å–∫–æ –Ω–µ —Å–∏—Å—Ç–µ–º–Ω—ã–µ)
await roleService.deleteRole(roleId);
```

### –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ —Ä–æ–ª–µ–π

```javascript
// –ù–∞–∑–Ω–∞—á–∏—Ç—å —Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
await roleService.assignRole(userId, roleId);

// –ú–∞—Å—Å–æ–≤–æ–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ
await roleService.assignRoleBulk([userId1, userId2], roleId);

// –ü–æ–ª—É—á–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Ä–æ–ª–∏
const { success, users } = await roleService.getUsersByRole(roleId);
```

---

## –•—É–∫–∏ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–∞–≤

### usePermissions

```javascript
import { usePermissions } from '../hooks/usePermissions';
import { MODULES, ACCESS_LEVELS } from '../constants';

function MyComponent() {
  const {
    loading,              // –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö —Ä–æ–ª–∏
    userRole,             // –û–±—ä–µ–∫—Ç —Ä–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    getModuleAccess,      // (module) => 'none'|'view'|'edit'|'admin'
    hasAccess,            // (module) => boolean (–ª—é–±–æ–π –¥–æ—Å—Ç—É–ø)
    canView,              // (module) => boolean
    canEdit,              // (module) => boolean
    canAdmin,             // (module) => boolean
    isSystemAdmin,        // () => boolean
    getAccessibleModules, // () => ['tasks', 'boards', ...]
    getModulesMap,        // () => { tasks: 'edit', boards: 'view', ... }
  } = usePermissions();

  // –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
  if (canEdit(MODULES.TASKS)) {
    // –ü–æ–∫–∞–∑–∞—Ç—å –∫–Ω–æ–ø–∫—É —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–¥–∞—á–∏
  }

  if (isSystemAdmin()) {
    // –ü–æ–∫–∞–∑–∞—Ç—å –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
  }
}
```

### useModulePermission

```javascript
import { useModulePermission } from '../hooks/usePermissions';
import { MODULES, ACCESS_LEVELS } from '../constants';

function TasksPage() {
  const canEditTasks = useModulePermission(MODULES.TASKS, ACCESS_LEVELS.EDIT);

  return (
    <div>
      {canEditTasks && <CreateTaskButton />}
    </div>
  );
}
```

---

## –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –∑–∞—â–∏—Ç—ã –º–æ–¥—É–ª–µ–π

### ProtectedModule

```javascript
import ProtectedModule from '../components/Common/ProtectedModule';
import { MODULES, ACCESS_LEVELS } from '../constants';

function AdminPage() {
  return (
    <ProtectedModule
      module={MODULES.PROFILE}
      requiredLevel={ACCESS_LEVELS.ADMIN}
      showForbidden={true}  // –ü–æ–∫–∞–∑–∞—Ç—å "–ù–µ—Ç –¥–æ—Å—Ç—É–ø–∞" –≤–º–µ—Å—Ç–æ —Ä–µ–¥–∏—Ä–µ–∫—Ç–∞
      redirectTo="/"        // –ö—É–¥–∞ —Ä–µ–¥–∏—Ä–µ–∫—Ç–∏—Ç—å –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –ø—Ä–∞–≤
    >
      {/* –ö–æ–Ω—Ç–µ–Ω—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—ã */}
    </ProtectedModule>
  );
}
```

---

## Firestore Security Rules

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –º–æ–¥—É–ª—é

```javascript
// Firestore Rules
function hasModuleAccess(module, requiredLevel) {
  let roleData = getUserRoleData();
  let userLevel = roleData != null && module in roleData.modules
    ? roleData.modules[module]
    : 'none';
  let levels = ['none', 'view', 'edit', 'admin'];
  let userLevelIndex = levels.indexOf(userLevel);
  let requiredLevelIndex = levels.indexOf(requiredLevel);
  return roleData != null && userLevel != 'none' && userLevelIndex >= requiredLevelIndex;
}

// –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å
function canAccess(module, requiredLevel) {
  return hasModuleAccess(module, requiredLevel) || isApproved();
}
```

### –ü—Ä–∏–º–µ—Ä—ã –ø—Ä–∞–≤–∏–ª

```javascript
// –ó–∞–¥–∞—á–∏
match /tasks/{taskId} {
  allow list, get: if isSignedIn() && canAccess('tasks', 'view');
  allow create: if isSignedIn() && canAccess('tasks', 'edit');
  allow update: if isSignedIn() && canAccess('tasks', 'edit');
  allow delete: if isSignedIn() && (
    hasModuleAccess('tasks', 'admin') ||
    (canAccess('tasks', 'edit') && resource.data.createdBy == request.auth.uid)
  );
}

// –†–æ–ª–∏ (—Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω—ã)
match /roles/{roleId} {
  allow read: if isSignedIn();
  allow create, update: if isAdminOrOwner() || getUserRoleId() == 'admin';
  allow delete: if (isAdminOrOwner() || getUserRoleId() == 'admin')
    && resource.data.isSystem != true;
}
```

---

## UI –ê–¥–∞–ø—Ç–∞—Ü–∏—è

### –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ —Ç–∞–±—ã –≤ –∫–æ–º–∞–Ω–¥–∞—Ö

```javascript
// TeamDrawer.jsx
const tabsConfig = React.useMemo(() => {
  const allTabs = [
    { id: 'info', label: '–ò–Ω—Ñ–æ', icon: <Group />, alwaysShow: true },
    { id: 'chat', label: '–ß–∞—Ç', icon: <Chat />, alwaysShow: true },
    { id: 'boards', label: '–î–æ—Å–∫–∏', icon: <ViewKanban />, module: MODULES.BOARDS },
    { id: 'tasks', label: '–ó–∞–¥–∞—á–∏', icon: <Assignment />, module: MODULES.TASKS },
    { id: 'sketches', label: '–ù–∞–±—Ä–æ—Å–∫–∏', icon: <Lightbulb />, module: MODULES.SKETCHES },
  ];

  return allTabs.filter(tab =>
    tab.alwaysShow || (tab.module && hasAccess(tab.module))
  );
}, [hasAccess]);
```

### –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –º–µ–Ω—é –≤ Sidebar

```javascript
// Sidebar.jsx
const menuItems = [
  { title: '–ì–ª–∞–≤–Ω–∞—è', path: '/', alwaysShow: true },
  ...getAccessibleModules()
    .map(module => moduleToMenuItem[module])
    .filter(Boolean),
];
```

---

## –ú–∏–≥—Ä–∞—Ü–∏—è (–≤—ã–ø–æ–ª–Ω–µ–Ω–∞)

### –®–∞–≥–∏ –º–∏–≥—Ä–∞—Ü–∏–∏

1. ‚úÖ **–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ä–æ–ª–µ–π** - —Å–æ–∑–¥–∞–Ω–æ 5 —Å–∏—Å—Ç–µ–º–Ω—ã—Ö —Ä–æ–ª–µ–π
2. ‚úÖ **–ú–∏–≥—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π** - –≤—Å–µ–º –Ω–∞–∑–Ω–∞—á–µ–Ω `roleId` –Ω–∞ –æ—Å–Ω–æ–≤–µ `role`
3. ‚úÖ **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ Security Rules** - –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –º–æ–¥—É–ª—å–Ω—ã—Ö –ø—Ä–∞–≤
4. ‚úÖ **–û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** - —Å—Ç–∞—Ä–æ–µ –ø–æ–ª–µ `role` —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ

### –ú–∞–ø–ø–∏–Ω–≥ —Å—Ç–∞—Ä—ã—Ö —Ä–æ–ª–µ–π

```javascript
'admin' | 'owner' ‚Üí roleId: 'admin'
'pending'         ‚Üí roleId: 'trainee'
'member'          ‚Üí roleId: 'office'
```

---

## –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–æ–ª—è–º–∏

### –°—Ç—Ä–∞–Ω–∏—Ü–∞ `/admin/roles`

**–î–æ—Å—Ç—É–ø:** –¢–æ–ª—å–∫–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã (`roleId: 'admin'` –∏–ª–∏ `role: 'admin'`)

**–§—É–Ω–∫—Ü–∏–∏:**
- –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö —Ä–æ–ª–µ–π
- –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ä–æ–ª–µ–π
- –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ –∫ –º–æ–¥—É–ª—è–º
- –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ —Ä–æ–ª–µ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º
- –£–¥–∞–ª–µ–Ω–∏–µ —Ä–æ–ª–µ–π (–∫—Ä–æ–º–µ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö)

**–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å:**
- –ö–∞—Ä—Ç–æ—á–∫–∏ —Ä–æ–ª–µ–π —Å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞–º–∏
- –ú–æ–¥—É–ª—å–Ω–∞—è –º–∞—Ç—Ä–∏—Ü–∞ –ø—Ä–∞–≤ (—Ç–∞–±–ª–∏—Ü–∞ –º–æ–¥—É–ª–µ–π √ó —É—Ä–æ–≤–Ω–∏)
- –î–∏–∞–ª–æ–≥ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è —Ä–æ–ª–∏ —Å –≤—ã–±–æ—Ä–æ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

---

## –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã

```javascript
// src/constants/roles.js

export const ACCESS_LEVELS = {
  NONE: 'none',
  VIEW: 'view',
  EDIT: 'edit',
  ADMIN: 'admin',
};

export const MODULES = {
  TASKS: 'tasks',
  BOARDS: 'boards',
  SPRINTS: 'sprints',
  CALENDAR: 'calendar',
  SKETCHES: 'sketches',
  TEAMS: 'teams',
  NEWS: 'news',
  LEARNING: 'learning',
  CHAT: 'chat',
  KNOWLEDGE: 'knowledge',
  PROFILE: 'profile',
};

export const SYSTEM_ROLES = {
  ADMIN: 'admin',
  MANAGER: 'manager',
  OFFICE: 'office',
  TRAINEE: 'trainee',
  VIEWER: 'viewer',
};
```

---

## Troubleshooting

### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –≤–∏–¥–∏—Ç –º–æ–¥—É–ª–∏

**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ—Ç roleId –∏–ª–∏ —Ä–æ–ª—å –Ω–µ –∏–º–µ–µ—Ç –¥–æ—Å—Ç—É–ø–∞

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ Firestore: `users/{userId}` ‚Üí –µ—Å—Ç—å –ª–∏ `roleId`
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ Firestore: `roles/{roleId}` ‚Üí –µ—Å—Ç—å –ª–∏ –¥–æ—Å—Ç—É–ø –∫ –º–æ–¥—É–ª—é
3. –ù–∞–∑–Ω–∞—á–∏—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—É—é —Ä–æ–ª—å —á–µ—Ä–µ–∑ `/admin/roles`

### –û—à–∏–±–∫–∞ "Missing or insufficient permissions"

**–ü—Ä–∏—á–∏–Ω–∞:** Firestore Rules –±–ª–æ–∫–∏—Ä—É—é—Ç –¥–æ—Å—Ç—É–ø

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ Firebase Console ‚Üí Firestore ‚Üí Rules
2. –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –ø—Ä–∞–≤–∏–ª–∞ —Å–æ–¥–µ—Ä–∂–∞—Ç `canAccess()` –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ Firestore –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞

### –°–∏—Å—Ç–µ–º–Ω—É—é —Ä–æ–ª—å –Ω–µ–ª—å–∑—è —É–¥–∞–ª–∏—Ç—å

**–≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ!** –†–æ–ª–∏ —Å `isSystem: true` –∑–∞—â–∏—â–µ–Ω—ã –æ—Ç —É–¥–∞–ª–µ–Ω–∏—è –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ —Å–∏—Å—Ç–µ–º—ã.

---

## Best Practices

### ‚úÖ DO

- –í—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ø—Ä–∞–≤–∞ –ø–µ—Ä–µ–¥ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º UI
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `ProtectedModule` –¥–ª—è –∑–∞—â–∏—Ç—ã —Å—Ç—Ä–∞–Ω–∏—Ü
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `canEdit()/canView()` –¥–ª—è —É—Å–ª–æ–≤–Ω–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞
- –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ø—Ä–∞–≤–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ (Firestore Rules) –ò –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ

### ‚ùå DON'T

- –ù–µ —É–¥–∞–ª—è–π—Ç–µ —Å–∏—Å—Ç–µ–º–Ω—ã–µ —Ä–æ–ª–∏
- –ù–µ –¥–∞—ë—Ç–µ –≤—Å–µ–º `admin` –¥–æ—Å—Ç—É–ø –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
- –ù–µ –ø–æ–ª–∞–≥–∞–π—Ç–µ—Å—å —Ç–æ–ª—å–∫–æ –Ω–∞ –∫–ª–∏–µ–Ω—Ç—Å–∫—É—é –ø—Ä–æ–≤–µ—Ä–∫—É –ø—Ä–∞–≤
- –ù–µ —É–¥–∞–ª—è–π—Ç–µ —Å—Ç–∞—Ä–æ–µ –ø–æ–ª–µ `role` (–ø–æ–∫–∞ –Ω—É–∂–Ω–∞ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å)

---

## Roadmap

### –ë—É–¥—É—â–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

- [ ] Custom Claims –≤ Firebase Auth –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–∞–≤
- [ ] –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–æ–ª–µ–π
- [ ] –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π —Ä–æ–ª–µ–π (audit log)
- [ ] –≠–∫—Å–ø–æ—Ä—Ç/–∏–º–ø–æ—Ä—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Ä–æ–ª–µ–π
- [ ] –ì—Ä—É–ø–ø–æ–≤—ã–µ —Ä–æ–ª–∏ (–Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ)
- [ ] –í—Ä–µ–º–µ–Ω–Ω—ã–µ —Ä–æ–ª–∏ (expires)

---

## –ö–æ–Ω—Ç–∞–∫—Ç—ã

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞:** 22.12.2025
**–í–æ–ø—Ä–æ—Å—ã:** –û–±—Ä–∞—â–∞–π—Ç–µ—Å—å –∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É —Å–∏—Å—Ç–µ–º—ã
