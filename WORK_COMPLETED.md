# –í—ã–ø–æ–ª–Ω–µ–Ω–Ω–∞—è —Ä–∞–±–æ—Ç–∞

–î–æ–∫—É–º–µ–Ω—Ç —Å–æ–∑–¥–∞–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏. –î–∞—Ç–∞: 2025-12-17

## ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –±–∞–≥–∏

### 1. –ü—Ä–æ–±–ª–µ–º–∞ "–ó–∞–≥—Ä—É–∑–∫–∞..." –≤ –Ω–æ–≤–æ—Å—Ç—è—Ö –∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è—Ö
**–ü—Ä–æ–±–ª–µ–º–∞**: –í–º–µ—Å—Ç–æ –∏–º–µ–Ω –∞–≤—Ç–æ—Ä–æ–≤ –æ—Ç–æ–±—Ä–∞–∂–∞–ª–æ—Å—å "–ó–∞–≥—Ä—É–∑–∫–∞..."

**–ü—Ä–∏—á–∏–Ω–∞**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏—Å—å –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–æ–ª—è `displayName` –∏ `avatarUrl` –≤–º–µ—Å—Ç–æ `firstName`, `lastName` –∏ `avatar`

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ —Ñ–∞–π–ª–∞—Ö**:
- `src/components/News/NewsCard.jsx`
- `src/components/News/CommentSection.jsx`
- `src/components/Sketch/SketchDrawer.jsx`
- `src/components/Task/TaskDrawer.jsx`
- `src/components/Team/TeamDrawer.jsx`
- `src/pages/TeamPage.jsx`
- `src/components/Dashboard/widgets/OverdueWidget.jsx`
- `src/components/Dashboard/widgets/TasksWidget.jsx`
- `src/components/AI/AITaskCreator.jsx`

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: –¢–µ–ø–µ—Ä—å –≤–µ–∑–¥–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∏–º–µ–Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ –∞–≤–∞—Ç–∞—Ä—ã

---

## üÜï –ù–æ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (Common)

### 1. MentionInput
**–§–∞–π–ª**: `src/components/Common/MentionInput.jsx`

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª**:
- –ê–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –ø—Ä–∏ –≤–≤–æ–¥–µ @—É–ø–æ–º–∏–Ω–∞–Ω–∏—è
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø–æ –∏–º–µ–Ω–∏
- –ù–∞–≤–∏–≥–∞—Ü–∏—è —Å—Ç—Ä–µ–ª–∫–∞–º–∏ –∏ Enter –¥–ª—è –≤—ã–±–æ—Ä–∞
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —É–ø–æ–º—è–Ω—É—Ç—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ mentions –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –∏–∑ —Ç–µ–∫—Å—Ç–∞

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**:
```jsx
<MentionInput
  value={text}
  onChange={setText}
  users={users}
  mentions={mentions}
  onMentionsChange={setMentions}
/>
```

### 2. EntityLink
**–§–∞–π–ª**: `src/components/Common/EntityLink.jsx`

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª**:
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Å—ã–ª–æ–∫ –Ω–∞ –∑–∞–¥–∞—á–∏, –¥–æ—Å–∫–∏, –∫–æ–º–∞–Ω–¥—ã, –Ω–∞–±—Ä–æ—Å–∫–∏, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö —Å—É—â–Ω–æ—Å—Ç–∏
- –ö–ª–∏–∫ –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è drawer —Å—É—â–Ω–æ—Å—Ç–∏
- –¶–≤–µ—Ç–æ–≤–æ–µ –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ —Ç–∏–ø—É —Å—É—â–Ω–æ—Å—Ç–∏

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**:
```jsx
<EntityLink type="task" id="task123" />
<EntityLink type="user" id="user456" />
```

### 3. EntityPicker
**–§–∞–π–ª**: `src/components/Common/EntityPicker.jsx`

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª**:
- –î–∏–∞–ª–æ–≥ –≤—ã–±–æ—Ä–∞ —Å—É—â–Ω–æ—Å—Ç–∏ –¥–ª—è –≤—Å—Ç–∞–≤–∫–∏
- –¢–∞–±—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ (–∑–∞–¥–∞—á–∏, –¥–æ—Å–∫–∏, –∫–æ–º–∞–Ω–¥—ã, –Ω–∞–±—Ä–æ—Å–∫–∏, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏)
- –ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é/–∏–º–µ–Ω–∏
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**:
```jsx
<EntityPicker
  open={open}
  onClose={handleClose}
  onSelect={(type, entity) => {
    // –í—Å—Ç–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É –Ω–∞ entity
  }}
  userId={currentUserId}
/>
```

### 4. CommentInput
**–§–∞–π–ª**: `src/components/Common/CommentInput.jsx`

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª**:
- –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π input –¥–ª—è –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤
- –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π MentionInput
- –ü—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —Å AI
- –í—Å—Ç–∞–≤–∫–∞ —Å—Å—ã–ª–æ–∫ –Ω–∞ —Å—É—â–Ω–æ—Å—Ç–∏ —á–µ—Ä–µ–∑ EntityPicker
- Ctrl+Enter –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**:
```jsx
<CommentInput
  onSubmit={async (data) => {
    // data.text - —Ç–µ–∫—Å—Ç
    // data.mentions - –º–∞—Å—Å–∏–≤ userId
    // data.entityLinks - –º–∞—Å—Å–∏–≤ {type, id}
    // data.attachments - –º–∞—Å—Å–∏–≤ —Ñ–∞–π–ª–æ–≤
  }}
  users={users}
  userId={currentUserId}
/>
```

### 5. ThreadedComment
**–§–∞–π–ª**: `src/components/Common/ThreadedComment.jsx`

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª**:
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –æ—Ç–≤–µ—Ç–æ–≤
- –†–µ–∫—É—Ä—Å–∏–≤–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π ‚Üí –æ—Ç–≤–µ—Ç—ã ‚Üí –æ—Ç–≤–µ—Ç—ã –Ω–∞ –æ—Ç–≤–µ—Ç—ã)
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –≥–ª—É–±–∏–Ω–∞ –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 3)
- –ö–Ω–æ–ø–∫–∏ "–û—Ç–≤–µ—Ç–∏—Ç—å", "–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å", "–£–¥–∞–ª–∏—Ç—å"
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ @mentions –∫–∞–∫ EntityLink
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ entityLinks
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤–ª–æ–∂–µ–Ω–∏–π (—Ñ–∞–π–ª—ã, –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è)

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**:
```jsx
<ThreadedComment
  comment={comment}
  author={author}
  currentUserId={userId}
  users={users}
  replies={comment.replies}
  onReply={handleReply}
  onEdit={handleEdit}
  onDelete={handleDelete}
  depth={0}
  maxDepth={3}
/>
```

---

## üé® Drawer Stack System

### 1. DrawerStackContext
**–§–∞–π–ª**: `src/contexts/DrawerStackContext.jsx`

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª**:
- Context –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å—Ç–µ–∫–æ–º drawer'–æ–≤
- –ú–µ—Ç–æ–¥—ã: `openDrawer`, `closeDrawer`, `closeAllDrawers`, `closeOthers`
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–∏ –∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ drawer'–æ–≤

**API**:
```javascript
const { openDrawer, closeDrawer, drawerStack } = useDrawerStack();

openDrawer({
  id: 'task-123',
  type: 'task',
  entityId: '123',
  data: { ... }
});
```

### 2. StackedDrawer
**–§–∞–π–ª**: `src/components/Common/StackedDrawer.jsx`

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª**:
- Drawer —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —Å—Ç–µ–∫–∞
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–º–µ—â–µ–Ω–∏–µ –≤–ª–µ–≤–æ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –Ω–æ–≤–æ–≥–æ drawer
- Breadcrumbs –Ω–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ —Å—Ç–µ–∫—É
- –ö–Ω–æ–ø–∫–∞ "–ó–∞–∫—Ä—ã—Ç—å –≤—Å–µ"
- –ü–ª–∞–≤–Ω—ã–µ –∞–Ω–∏–º–∞—Ü–∏–∏

**–ü–æ–≤–µ–¥–µ–Ω–∏–µ**:
- 1-–π drawer: —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –ø–æ–∑–∏—Ü–∏—è —Å–ø—Ä–∞–≤–∞
- 2-–π drawer: —Å–¥–≤–∏–≥–∞–µ—Ç—Å—è –≤–ª–µ–≤–æ –Ω–∞ 40px
- 3-–π+ drawer: –Ω–∞–∫–ª–∞–¥—ã–≤–∞—é—Ç—Å—è –¥—Ä—É–≥ –Ω–∞ –¥—Ä—É–≥–∞ —Å –Ω–µ–±–æ–ª—å—à–∏–º —Å–º–µ—â–µ–Ω–∏–µ–º

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**:
```jsx
<StackedDrawer
  open={open}
  onClose={handleClose}
  title="–ó–∞–¥–∞—á–∞ #123"
  id="task-123"
>
  {/* –ö–æ–Ω—Ç–µ–Ω—Ç drawer */}
</StackedDrawer>
```

### 3. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ App.jsx
**–ò–∑–º–µ–Ω–µ–Ω–∏—è**:
- –î–æ–±–∞–≤–ª–µ–Ω `DrawerStackProvider` –≤ –∏–µ—Ä–∞—Ä—Ö–∏—é –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤
- –¢–µ–ø–µ—Ä—å –≤—Å–µ drawer'—ã –º–æ–≥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—Ç–µ–∫

---

## üîó Drawer Stack Integration (–ó–∞–≤–µ—Ä—à–µ–Ω–æ)

### EntityDrawerManager –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω

**–§–∞–π–ª**: `src/App.jsx`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è**:
- –î–æ–±–∞–≤–ª–µ–Ω –∏–º–ø–æ—Ä—Ç EntityDrawerManager
- –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–æ–±–∞–≤–ª–µ–Ω –≤ –∏–µ—Ä–∞—Ä—Ö–∏—é –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤
- –¢–µ–ø–µ—Ä—å –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≥–ª–æ–±–∞–ª—å–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è 'openEntityDrawer'

### –í—Å–µ Drawer –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã

**–û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã**:
1. `src/components/Task/TaskDrawer.jsx`
2. `src/components/Sketch/SketchDrawer.jsx`
3. `src/components/Team/TeamDrawer.jsx`
4. `src/components/User/UserProfileDrawer.jsx`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–∞–∂–¥–æ–º**:
- –ó–∞–º–µ–Ω–µ–Ω `Drawer` –Ω–∞ `StackedDrawer`
- –î–æ–±–∞–≤–ª–µ–Ω prop `drawerId` –¥–ª—è –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –≤ —Å—Ç–µ–∫–µ
- TaskDrawer: –∏–∑–º–µ–Ω–µ–Ω —Å prop `task` (–æ–±—ä–µ–∫—Ç) –Ω–∞ `taskId` (string)
- –£–¥–∞–ª–µ–Ω—ã –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ props (`onUpdate`, `onMemberClick`, `onAssignTask`, `onStartChat`)

**–¢–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç**:
- –û—Ç–∫—Ä—ã—Ç–∏–µ drawer —á–µ—Ä–µ–∑ `window.dispatchEvent(new CustomEvent('openEntityDrawer', { detail: { type, id } }))`
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö drawer
- –ü–µ—Ä–≤—ã–π drawer: —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –ø–æ–∑–∏—Ü–∏—è
- –í—Ç–æ—Ä–æ–π drawer: —Å–¥–≤–∏–≥ –≤–ª–µ–≤–æ –Ω–∞ 40px
- –¢—Ä–µ—Ç–∏–π+ drawers: –Ω–∞–ª–æ–∂–µ–Ω–∏–µ —Å 10px —Å–º–µ—â–µ–Ω–∏–µ–º
- Breadcrumbs –Ω–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ —Å—Ç–µ–∫—É
- –ö–Ω–æ–ø–∫–∞ "–ó–∞–∫—Ä—ã—Ç—å –≤—Å–µ"

---

## üìß Email Templates (–ö–æ–º–ø–æ–Ω–µ–Ω—Ç–Ω—ã–π –ø–æ–¥—Ö–æ–¥)

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
–ö–∞–∂–¥—ã–π email —à–∞–±–ª–æ–Ω - –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ñ–∞–π–ª –¥–ª—è:
- –ú–æ–¥—É–ª—å–Ω–æ—Å—Ç–∏
- –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- –õ–µ–≥–∫–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–∏

### –°–æ–∑–¥–∞–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

**–î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è**: `src/utils/emailTemplates/`

1. **BaseTemplate.js** - –ë–∞–∑–æ–≤—ã–π —à–∞–±–ª–æ–Ω —Å–æ –≤—Å–µ–º–∏ —Å—Ç–∏–ª—è–º–∏
2. **TaskAssignedEmail.js** - –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏
3. **TaskCommentEmail.js** - –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ –∑–∞–¥–∞—á–µ
4. **TaskDeadlineEmail.js** - –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –æ –¥–µ–¥–ª–∞–π–Ω–µ
5. **TeamInviteEmail.js** - –ü—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ –≤ –∫–æ–º–∞–Ω–¥—É
6. **BoardSharedEmail.js** - –î–æ—Å—Ç—É–ø –∫ –¥–æ—Å–∫–µ
7. **MentionEmail.js** - –£–ø–æ–º–∏–Ω–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
8. **index.js** - –≠–∫—Å–ø–æ—Ä—Ç –≤—Å–µ—Ö —à–∞–±–ª–æ–Ω–æ–≤
9. **README.md** - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```javascript
import { TaskAssignedEmail } from './utils/emailTemplates';

const html = TaskAssignedEmail({
  task: { ... },
  assignedBy: { ... },
  assignee: { ... },
});

// –û—Ç–ø—Ä–∞–≤–∫–∞ —á–µ—Ä–µ–∑ email —Å–µ—Ä–≤–∏—Å (—Ç—Ä–µ–±—É–µ—Ç—Å—è backend)
```

### –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ
–î–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ email –Ω—É–∂–µ–Ω backend (Firebase Cloud Functions –∏–ª–∏ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä —Å Nodemailer)

---

## üîê Firestore Rules

### –§–∞–π–ª
`firestore.rules.new` - –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

### –ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

1. **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ threading –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤**
   - –ü–æ–¥–∫–æ–ª–ª–µ–∫—Ü–∏—è `replies` –¥–ª—è –æ—Ç–≤–µ—Ç–æ–≤
   - –†–µ–∫—É—Ä—Å–∏–≤–Ω—ã–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞

2. **Mentions –ø–æ–¥–¥–µ—Ä–∂–∫–∞**
   - –†–∞–∑—Ä–µ—à–µ–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—è `mentions` –≤ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
   - –ú–∞—Å—Å–∏–≤ userId —É–ø–æ–º—è–Ω—É—Ç—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

3. **Entity Links**
   - –†–∞–∑—Ä–µ—à–µ–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—è `entityLinks` –≤ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
   - –ú–∞—Å—Å–∏–≤ –æ–±—ä–µ–∫—Ç–æ–≤ `{type, id}`

4. **Attachments**
   - –†–∞–∑—Ä–µ—à–µ–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—è `attachments` –≤ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏

### –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ

1. –û—Ç–∫—Ä–æ–π—Ç–µ Firebase Console
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ Firestore Database ‚Üí Rules
3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ `firestore.rules.new`
4. –í—Å—Ç–∞–≤—å—Ç–µ –∏ –æ–ø—É–±–ª–∏–∫—É–π—Ç–µ

---

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

### –°–æ–∑–¥–∞–Ω–æ —Ñ–∞–π–ª–æ–≤: 17

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (6)**:
- MentionInput.jsx
- EntityLink.jsx
- EntityPicker.jsx
- CommentInput.jsx
- ThreadedComment.jsx
- StackedDrawer.jsx

**Contexts (1)**:
- DrawerStackContext.jsx

**Email Templates (9)**:
- BaseTemplate.js
- TaskAssignedEmail.js
- TaskCommentEmail.js
- TaskDeadlineEmail.js
- TeamInviteEmail.js
- BoardSharedEmail.js
- MentionEmail.js
- index.js
- README.md

**–ö–æ–Ω—Ñ–∏–≥–∏ (1)**:
- firestore.rules.new

### –ò–∑–º–µ–Ω–µ–Ω–æ —Ñ–∞–π–ª–æ–≤: 15

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞–≥–æ–≤ (10)**:
- NewsCard.jsx - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω –±–∞–≥ —Å displayName
- CommentSection.jsx - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω –±–∞–≥ —Å displayName
- SketchDrawer.jsx - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω avatarUrl
- TaskDrawer.jsx - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω avatarUrl
- TeamDrawer.jsx - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω avatarUrl
- TeamPage.jsx - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω avatarUrl
- OverdueWidget.jsx - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω avatarUrl
- TasksWidget.jsx - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω avatarUrl
- AITaskCreator.jsx - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω avatarUrl
- WORK_COMPLETED.md - –æ–±–Ω–æ–≤–ª–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

**Drawer Stack Integration (5)**:
- App.jsx - –¥–æ–±–∞–≤–ª–µ–Ω DrawerStackProvider + EntityDrawerManager
- TaskDrawer.jsx - –æ–±–Ω–æ–≤–ª–µ–Ω –¥–ª—è StackedDrawer (taskId prop)
- SketchDrawer.jsx - –æ–±–Ω–æ–≤–ª–µ–Ω –¥–ª—è StackedDrawer
- TeamDrawer.jsx - –æ–±–Ω–æ–≤–ª–µ–Ω –¥–ª—è StackedDrawer
- UserProfileDrawer.jsx - –æ–±–Ω–æ–≤–ª–µ–Ω –¥–ª—è StackedDrawer

---

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ (TODO)

### 1. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

- [ ] –ó–∞–º–µ–Ω–∏—Ç—å CommentSection –≤ News –Ω–∞ CommentInput + ThreadedComment
- [ ] –ó–∞–º–µ–Ω–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –≤ Task –Ω–∞ –Ω–æ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- [ ] –ó–∞–º–µ–Ω–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –≤ Sketch –Ω–∞ –Ω–æ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- [ ] –î–æ–±–∞–≤–∏—Ç—å threading –≤ —Å–µ—Ä–≤–∏—Å—ã (comment.parentId)

### 2. Drawer Stack –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

- [x] –°–æ–∑–¥–∞—Ç—å EntityDrawerManager (–≥–ª–æ–±–∞–ª—å–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–æ–±—ã—Ç–∏–π)
- [x] –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å EntityDrawerManager –≤ App.jsx
- [x] –û–±–Ω–æ–≤–∏—Ç—å TaskDrawer –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å–æ StackedDrawer
- [x] –û–±–Ω–æ–≤–∏—Ç—å SketchDrawer –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å–æ StackedDrawer
- [x] –û–±–Ω–æ–≤–∏—Ç—å TeamDrawer –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å–æ StackedDrawer
- [x] –û–±–Ω–æ–≤–∏—Ç—å UserProfileDrawer –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å–æ StackedDrawer

### 3. –°–µ—Ä–≤–∏—Å—ã

- [ ] –î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É mentions –≤ task.service.js
- [ ] –î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É entityLinks –≤ task.service.js
- [ ] –î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É threading (parentId, replies) –≤ task.service.js
- [ ] –¢–æ –∂–µ –¥–ª—è sketch.service.js
- [ ] –¢–æ –∂–µ –¥–ª—è news.service.js
- [ ] –¢–æ –∂–µ –¥–ª—è team.service.js (chat)

### 4. Notifications

- [ ] –î–æ–±–∞–≤–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –¥–ª—è mentions
- [ ] –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å browserPushNotifications.js
- [ ] –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å soundNotifications.js
- [ ] –î–æ–±–∞–≤–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ push/sound –≤ Settings

### 5. –°–ø—Ä–∏–Ω—Ç—ã

- [ ] –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å Sprint –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –≤ BoardPage
- [ ] –î–æ–±–∞–≤–∏—Ç—å –º–∞—Ä—à—Ä—É—Ç—ã –¥–ª—è —Å–ø—Ä–∏–Ω—Ç–æ–≤
- [ ] –î–æ–±–∞–≤–∏—Ç—å —Å–≤—è–∑—å –∑–∞–¥–∞—á —Å–æ —Å–ø—Ä–∏–Ω—Ç–∞–º–∏

### 6. Email Backend

- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Firebase Cloud Functions
- [ ] –°–æ–∑–¥–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é sendEmail
- [ ] –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å notification.service.js
- [ ] –î–æ–±–∞–≤–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ email –≤ –ø—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

---

## üîç –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ß—Ç–æ –Ω—É–∂–Ω–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å

1. **MentionInput**
   - [ ] –ê–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –ø—Ä–∏ –≤–≤–æ–¥–µ @
   - [ ] –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
   - [ ] –í—Å—Ç–∞–≤–∫–∞ mention
   - [ ] –£–¥–∞–ª–µ–Ω–∏–µ mention –∏–∑ —Å–ø–∏—Å–∫–∞

2. **EntityPicker**
   - [ ] –û—Ç–∫—Ä—ã—Ç–∏–µ –¥–∏–∞–ª–æ–≥–∞
   - [ ] –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ç–∞–±–æ–≤
   - [ ] –ü–æ–∏—Å–∫ —Å—É—â–Ω–æ—Å—Ç–µ–π
   - [ ] –í—ã–±–æ—Ä —Å—É—â–Ω–æ—Å—Ç–∏

3. **ThreadedComment**
   - [ ] –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è
   - [ ] –ö–Ω–æ–ø–∫–∞ "–û—Ç–≤–µ—Ç–∏—Ç—å"
   - [ ] –í–ª–æ–∂–µ–Ω–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã (–¥–æ 3 —É—Ä–æ–≤–Ω–µ–π)
   - [ ] –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ

4. **StackedDrawer**
   - [ ] –û—Ç–∫—Ä—ã—Ç–∏–µ 1-–≥–æ drawer
   - [ ] –û—Ç–∫—Ä—ã—Ç–∏–µ 2-–≥–æ drawer (—Å–¥–≤–∏–≥ –≤–ª–µ–≤–æ)
   - [ ] –û—Ç–∫—Ä—ã—Ç–∏–µ 3-–≥–æ drawer
   - [ ] Breadcrumbs –Ω–∞–≤–∏–≥–∞—Ü–∏—è
   - [ ] –ó–∞–∫—Ä—ã—Ç–∏–µ drawer'–æ–≤

5. **Email Templates**
   - [ ] –ì–µ–Ω–µ—Ä–∞—Ü–∏—è HTML
   - [ ] –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ –ø–æ—á—Ç–æ–≤—ã—Ö –∫–ª–∏–µ–Ω—Ç–∞—Ö
   - [ ] –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å (mobile)

---

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–æ–∑–¥–∞–Ω—ã —Å —É—á–µ—Ç–æ–º –ø—Ä–∏–Ω—Ü–∏–ø–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–Ω–æ—Å—Ç–∏
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω—ã Material-UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –¥–ª—è –µ–¥–∏–Ω–æ–æ–±—Ä–∞–∑–∏—è
- –ö–æ–¥ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω –¥–ª—è –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è —Ç–æ–∫–µ–Ω–æ–≤
- –í—Å–µ –Ω–æ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–µ –∏ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ
- Firestore rules –æ–±–Ω–æ–≤–ª–µ–Ω—ã –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –Ω–æ–≤—ã—Ö –ø–æ–ª–µ–π
- Email templates –≥–æ—Ç–æ–≤—ã –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é, –Ω–æ —Ç—Ä–µ–±—É—é—Ç backend

---

**–°—Ç–∞—Ç—É—Å**: Drawer Stack —Å–∏—Å—Ç–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞ ‚úÖ
**–°–ª–µ–¥—É—é—â–∏–π —ç—Ç–∞–ø**: –ó–∞–º–µ–Ω–∞ comment —Å–∏—Å—Ç–µ–º –Ω–∞ –Ω–æ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–æ–≤
